var objMRFAddJS;$(document).ready(function(){objMRFAddJS={Initialize:function(){var n=this;n.ElementBinding();$("#divMRFModal #btnSave").show();$("#divMRFModal .form-control").attr("readonly",!1);$("#txtVacancy").attr("readonly",!0);$("#divMRFModal #btnDelete, #divMRFModal #btnBack").remove();$("#ddlOrgGroup").change();$(".tablinks:nth-child(2)").remove();objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApprovalHistory");$("#ddlNatureOfEmployment option[value='PART_TIME'],             #ddlNatureOfEmployment option[value='PROJ_BASED'],             #ddlNatureOfEmployment option[value='EXTERNAL']").prop("disabled",!0)},AddSuccessFunction:function(){$("#tblMRFFormApprovalHistoryList").jqGrid("GridUnload");$("#tblMRFFormApprovalHistoryList").jqGrid("GridDestroy");$("#divMRFFilter #btnSearch").click();$("#frmMRF").trigger("reset");$("#divSignatories").html("");$("#divManpowerCountDetails").html("")},AddSignatoriesDynamicFields:function(n){$("#divSignatories").html("");$(n.Result).each(function(n,t){var i=t.ApprovalStatusCode=="PENDING"?"#FF6D0D":t.ApprovalStatusCode=="FOR_APPROVAL"?"#4949FF":t.ApprovalStatusCode=="APPROVED"?"#029902":t.ApprovalStatusCode=="REJECTED"?"#FF0000":"";$("#divSignatories").append('<div class="form-group form-fields"> \t<div class="col-md-1-5 col-label"> \t\t<label class="control-label block-label"> Approver <span class="unreqField">* <\/span>'+t.HierarchyLevel+'<\/label> \t<\/div> \t<div class="col-md-1-5 col-label"> \t\t<label class="control-label block-label" style="color:'+i+'">'+t.ApprovalStatus+'<\/label> \t<\/div> \t<div class="col-md-5 col-label"> \t\t<label class="control-label block-label">'+((t.ApproverName||"")==""?"":"Approver: "+t.ApproverName+" "+t.ApprovedDate)+"<\/label> \t<\/div> <\/div>")})},ElementBinding:function(){var n=this;NumberOnly($("#divMRFModal #txtTurnaroundTime"));$("#ddlOrgGroup").change(function(){$("#ddlOrgGroup").val()!=""&&(GenerateDropdownValues(GetPositionDropDownWithCountURL+"&OrgGroupID="+$("#ddlOrgGroup").val(),"ddlPosition","Value","Text","","",!1),$("input[name='MRF.OrgGroupID']").val($("#ddlOrgGroup").val()));$("#divMRFErrorMessage").html("");$("#ddlPosition").removeClass("errMessage");$("#ddlPosition").val("");$("#divManpowerCountDetails").html("")});$("#ddlPosition").change(function(){var n;$("#ddlPosition").val()!=""&$("#ddlOrgGroup").val()!=""?(n=function(){objMRFListJS.LoadApprovalHistoryJQGrid({RequestingPositionID:$("#ddlPosition").val(),RequestingOrgGroupID:$("#ddlOrgGroup").val()})},objEMSCommonJS.GetAjax(GetApprovalHistoryURL+"&RequestingPositionID="+$("#ddlPosition").val()+"&RequestingOrgGroupID="+$("#ddlOrgGroup").val(),{},"",n),$("input[name='MRF.PositionID']").val($("#ddlPosition").val()),n=function(n){n.IsSuccess?($("#divMRFErrorMessage").html(""),$("#ddlPosition").removeClass("errMessage")):($("#divMRFErrorMessage").html('<label class="errMessage"><li>'+n.Result.MRFMessage+"<\/li><\/label><br />"),$("#ddlPosition").addClass("errMessage"))},objEMSCommonJS.GetAjax(ValidateExistingActualURL+"&OrgGroupID="+$("#ddlOrgGroup").val()+"&PositionID="+$("#ddlPosition").val(),{},"",n,null,!0)):($("#divManpowerCountDetails").html(""),$("#divSignatories").html(""))});$("#divMRFModal #btnSave").click(function(){var t=function(){if($("#txtturnaroundtime").val()=="0")$("#txtturnaroundtime").addclass("errmessage"),$("#txtturnaroundtime").focus(),$("#frmmrf #divmrferrormessage").html('<label class="errmessage"><li>'+greaterthan_zero.replace("{0}",$("#txtturnaroundtime")[0].title)+"<\/li><\/label><br />");else return!0},n;objEMSCommonJS.ValidateBlankFields("#frmMRF","#divMRFErrorMessage",t)&&(n=function(n){n.IsSuccess?($("#divMRFErrorMessage").html(""),$("#ddlPosition").removeClass("errMessage"),ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objEMSCommonJS.PostAjax(true                         , MRFAddPostURL                         , new FormData($('#frmMRF').get(0))                         , '#divMRFErrorMessage'                         , '#divMRFModal #btnSave'                         , objMRFAddJS.AddSuccessFunction); ","function")):($("#divMRFErrorMessage").html('<label class="errMessage"><li>'+n.Result.MRFMessage+"<\/li><\/label><br />"),$("#ddlPosition").addClass("errMessage"))},objEMSCommonJS.GetAjax(ValidateExistingActualURL+"&OrgGroupID="+$("#ddlOrgGroup").val()+"&PositionID="+$("#ddlPosition").val(),{},"",n))})}};objMRFAddJS.Initialize()});
