var objMRFAddApplicantListJS,CompanyDropDown=[];$(document).ready(function(){objMRFAddApplicantListJS={Initialize:function(){var n,t;$("#divMRFAddApplicantBodyModal .modal-header").mousedown(handle_mousedown);$("#divWorkflowTransactionBodyModal .modal-header").mousedown(handle_mousedown);n=this;workflowStepDropdownOptions=[];n.ElementBinding();t={MRFID:$("#divMRFAddApplicantModal #hdnID").val(),IDDelimited:$("#hdnIDDelimited").val(),ID:localStorage.AddApplicantListID,ForHiringID:localStorage.AddApplicantListForHiringID,ApplicantName:localStorage.AddApplicantListApplicantName,CurrentStepDelimited:localStorage.AddApplicantListCurrentStepDelimited,StatusDelimited:localStorage.AddApplicantListStatusDelimited,DateScheduledFrom:localStorage.AddApplicantListDateScheduledFrom,DateScheduledTo:localStorage.AddApplicantListDateScheduledTo,DateCompletedFrom:localStorage.AddApplicantListDateCompletedFrom,DateCompletedTo:localStorage.AddApplicantListDateCompletedTo,ApproverRemarks:localStorage.AddApplicantListApproverRemarks};objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApplicants","#divMRFAddApplicantModal");objMRFAddApplicantListJS.GetApplicantComment();$("#dpDateScheduled, #dpDateCompleted").datetimepicker({useCurrent:!0,format:"MM/DD/YYYY"});$("#dpDateScheduled, #dpDateCompleted").datetimepicker().on("dp.show",function(){$("#divWorkflowTransactionModal .modal-body").css({overflow:"visible"});$("#divWorkflowTransactionModal.modal").css({overflow:"visible"})}).on("dp.hide",function(){$("#divWorkflowTransactionModal .modal-body").css({overflow:"auto"});$("#divWorkflowTransactionModal.modal").css({overflow:"auto"})});$("#txtFilterDateScheduledFrom, #txtFilterDateScheduledTo,                 #txtFilterDateCompletedFrom, #txtFilterDateCompletedTo").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});$("#hdnIsHiredApplicantID").val("");n.GetCompanyDropDown();n.LoadJQGrid(t);n.GetLocalStorage()},ElementBinding:function(){var n=this;NumberOnly($("#divMRFAddApplicantModal #txtFilterApplicantID"));NumberOnly($("#divMRFAddApplicantModal #txtFilterExpectedSalaryFrom"));NumberOnly($("#divMRFAddApplicantModal #txtFilterExpectedSalaryTo"));$("#divMRFAddApplicantModal #btnSearch").click(function(){var t={MRFID:$("#divMRFAddApplicantModal #hdnID").val(),IDDelimited:$("#hdnIDDelimited").val(),ID:$("#divMRFAddApplicantModal #txtFilterApplicantID").val(),ForHiringID:$("#hdnIDForHiring").val(),ApplicantName:$("#divMRFAddApplicantModal #txtFilterApplicantName").val(),CurrentStepDelimited:objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedCurrentStep").value,StatusDelimited:objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedStatus").value,DateScheduledFrom:$("#txtFilterDateScheduledFrom").val(),DateScheduledTo:$("#txtFilterDateScheduledTo").val(),DateCompletedFrom:$("#txtFilterDateCompletedFrom").val(),DateCompletedTo:$("#txtFilterDateCompletedTo").val(),ApproverRemarks:$("#txtFilterApproverRemarks").val()};n.SetLocalStorage();ResetJQGridState("tblManpowerAddApplicantList");n.LoadJQGrid(t)});$("#divMRFAddApplicantModal #btnReset").click(function(){$("#divMRFAddApplicantModal div.filterFields input[type='search']").val("");$("#divMRFAddApplicantModal div.filterFields select").val("");$("#divMRFAddApplicantModal div.filterFields input[type='checkbox']").prop("checked",!0);$("#divMRFAddApplicantModal #multiSelectedCurrentStep").html("");$("#divMRFAddApplicantModal #multiSelectedStatus").html("");$("#divMRFAddApplicantModal #multiSelectedStatusOption label, #divMRFAddApplicantModal #multiSelectedStatusOption input").prop("title","add");$("#divMRFAddApplicantModal #btnSearch").click()});$("#divMRFAddApplicantModal #btnAddApplicant").click(function(){LoadPartial(ApplicantPickerURL,"divMRFApplicantPickerBodyModal");$("#divMRFAddApplicantModal").modal("hide");$("#divMRFApplicantPickerModal").modal("show")});$("#divMRFAddApplicantModal #btnCloseRequest").click(function(){$("#hdnIsHiredApplicantID").val()!="0"&$("#hdnIsHiredApplicantID").val()!=""?objMRFAddApplicantListJS.ConvertConfirmation(MODAL_HEADER,MSG_CONFIRM,"objMRFAddApplicantListJS.UpdateStatusMRFRequest("+$("#hdnIsHiredApplicantID").val()+", '"+$(this).val()+"')","objMRFAddApplicantListJS.ConvertApplicant("+$("#hdnIsHiredApplicantID").val()+","+$("#hdnOrgGroupID").val()+","+$("#hdnPositionID").val()+")"):$("#divMRFAddApplicantErrorMessage").html('<label class="errMessage"><li>'+MSG_MRF_REQUEST_FOR_HIRING+"<\/li><\/label><br />")});$("#divWorkflowTransactionModal #btnWorkflowTransactionSave").click(function(){$("#divMRFAddApplicantErrorMessage").hide();$("#divMRFAddApplicantErrorMessage").html("");$("#hdnLastStepCode").val()==$("#ddlStep").val()&($("#hdnIsHiredApplicantID").val()||"")!=""?($("#divMRFAddApplicantErrorMessage").show(),$("#divMRFAddApplicantErrorMessage").html('<label class="errMessage"><li>'+ONE_MRF_HIRED+"<\/li><\/label><br />")):objEMSCommonJS.ValidateBlankFields("#frmTransactionAdd","#divMRFErrorMessage")&&ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objEMSCommonJS.PostAjax(true                         , MRFAddApplicantModalSaveWorkflowURL                         , objMRFAddApplicantListJS.GetFormData()                         , '#divMRFAddApplicantErrorMessage'                         , '#divWorkflowTransactionModal #btnWorkflowTransactionSave'                         , objMRFAddApplicantListJS.EditSuccessFunction);","function")});$("#divMRFAddApplicantModal #btnSaveComment").click(function(){$("#divMRFAddApplicantModal #txtAreaComments").val()!=""?objEMSCommonJS.PostAjax(!0,SaveApplicantCommentsURL,objMRFAddApplicantListJS.GetCommentSectionFormData(),"#divMRFAddApplicantModal #divMRFErrorMessage","#divMRFAddApplicantModal #btnSaveComment",objMRFAddApplicantListJS.GetApplicantComment,null,!0):$("#divMRFAddApplicantModal #txtAreaComments").focus()});$("#btnBatchUpdate").click(function(){if($("#divMRFAddApplicantErrorMessage").hide(),$("#divMRFAddApplicantErrorMessage").html(""),$("#tblManpowerAddApplicantList").jqGrid("getGridParam","selarrrow").length==0)$("#divMRFAddApplicantErrorMessage").show(),$("#divMRFAddApplicantErrorMessage").html('<label class="errMessage"><li>'+PREF_SELECT_ONE+"applicant.<\/li><\/label><br />");else{$("#divWorkflowTransactionModal").modal("show");$("#ddlResult option").remove();$("#frmTransactionAdd .form-control").val("");var n=[],t=function(t){$("#ddlStep option").remove();$(t.Result).each(function(t,i){n.push({Value:i.Value,Text:i.Text})});objEMSCommonJS.PopulateDropDown("#ddlStep",n);$("#lblIsConfidential").text()=="Yes"?$("#ddlStep option[value='4A-JOB OFFER']").remove():$("#ddlStep option[value='4B-JOB OFFER HR HEAD']").remove();$("#ddlStep option[value='0-NEW']").remove()};objEMSCommonJS.GetAjax(GetWorkflowStepDropDownURL+"&WorkflowCode="+$("#hdnWorkflowCode").val(),{},"",t);$("#ddlStep").unbind("change");$("#ddlStep").change(function(){if($(this).val()!=""){var n=function(n){var t=function(n){$("#ddlResult option").remove();objEMSCommonJS.PopulateDropDown("#ddlResult",n.Result)};objEMSCommonJS.GetAjax(MRFAddApplicantReferenceValueURL+"&RefCode="+n.Result.ResultType,{},"",t)};objEMSCommonJS.GetAjax(MRFAddApplicantWorkflowStepURL+"&WorkflowCode="+$("#hdnWorkflowCode").val()+"&StepCode="+$(this).val(),{},"",n)}else $("#ddlResult option").remove()})}});$("#btnPrint").click(function(){var t=$("#MRFTransactionID").val().substring(9,16),n;$("#PrintMRFTransactionID").text(t+"-");n=function(n){n.rows.length>=2&&($("#PrintApprover1").text(n.rows[0].ApproverName),$("#PrintApprover2").text(n.rows[1].ApproverName),$("#PrintApprover1Date").text(n.rows[0].ApprovedDate),$("#PrintApprover2Date").text(n.rows[1].ApprovedDate),$("#PrintApprover1Remarks").text(n.rows[0].ApprovalRemarks),$("#PrintApprover2Remarks").text(n.rows[1].ApprovalRemarks));objEMSCommonJS.ShowPrintModal("divPrintMRF")};objEMSCommonJS.GetAjax(GetApprovalHistoryURL+"&RequestingPositionID="+$("#divMRFAddApplicantModal #hdnPositionID").val()+"&RequestingOrgGroupID="+$("#divMRFAddApplicantModal #hdnOrgGroupID").val()+"&PositionID="+$("#divMRFAddApplicantModal #hdnPositionID").val()+"&MRFID="+$("#divMRFAddApplicantModal #hdnID").val(),{},"",n)});objEMSCommonJS.BindFilterMultiSelectAutoComplete("divMRFAddApplicantModal #txtFilterCurrentStep",RecruitmentCurrentStepAutoCompleteURL,20,"divMRFAddApplicantModal #multiSelectedCurrentStep");objEMSCommonJS.BindFilterMultiSelectEnumValueDisplay("divMRFAddApplicantModal #multiSelectedStatus",GetApplicantStatusURL,"Value","Description")},GetApplicantComment:function(){var t={MRFID:$("#divMRFAddApplicantModal #hdnID").val()},n;$("#divMRFAddApplicantModal #txtAreaComments").val("");n=function(n){n.IsSuccess==!0&&($("#divMRFAddApplicantModal #divCommentsContainer").html(""),n.Result.length>0?($("#divMRFAddApplicantModal #divCommentsContainer").append("<span class='comment-header'>-- Start --<\/span>"),$(n.Result).each(function(t,i){$("#divMRFAddApplicantModal #divCommentsContainer").append("<span class='comment-details'>"+i.Timestamp+" "+i.Sender+": <\/span><span class='comment'> "+i.Comments+"<\/span><br>");n.Result.length<=t+1&&setTimeout(function(){$("#divMRFAddApplicantModal #divCommentsContainer").scrollTop($("#divMRFAddApplicantModal #divCommentsContainer")[0].scrollHeight)},300)})):$("#divMRFAddApplicantModal #divCommentsContainer").append("<span class='comment-header'>-- No comments found. --<\/span>"),$("#divMRFAddApplicantModal #txtAreaComments").attr("readonly",!1),$("#divMRFAddApplicantModal #txtAreaComments").prop("disabled",!1))};objEMSCommonJS.GetAjax(GetApplicantCommentsURL,t,"",n)},GetCommentSectionFormData:function(){var n=new FormData($("#frmTransactionAdd").get(0));return n.append("CommentsForm.MRFID",$("#divMRFAddApplicantModal #hdnID").val()),n.append("CommentsForm.Comments",$("#divMRFAddApplicantModal #txtAreaComments").val()),n},EditSuccessFunction:function(){$("#divWorkflowTransactionModal").modal("hide");$("#frmTransactionAdd .form-control").val("");objMRFAddApplicantListJS.WorkflowTransactionJQGrid({WorkflowID:$("#hdnWorkflowID").val(),MRFApplicantID:$("#hdnMRFApplicantID").val()});LoadPartial(MRFAddApplicantModalURL+"?ID="+$("#divMRFAddApplicantModal #hdnID").val(),"divMRFAddApplicantBodyModal")},GetFormData:function(){var n=new FormData($("#frmTransactionAdd").get(0));return n.append("Workflow.MRFID",$("#divMRFAddApplicantModal #hdnID").val()),$($("#tblManpowerAddApplicantList").jqGrid("getGridParam","selarrrow")).each(function(t,i){n.append("Workflow.BatchUpdateRecordIDs["+t+"]",i)}),$($("#tblManpowerAddApplicantList").jqGrid("getGridParam","selarrrow")).each(function(t,i){n.append("Workflow.BatchUpdateApplicantIDs["+t+"]",$("#tblManpowerAddApplicantList").jqGrid("getCell",i,"ID"))}),n},LoadJQGrid:function(n){var r=this,t,i;Loading(!0);t=localStorage.getItem("tblManpowerAddApplicantList")==""?"":$.parseJSON(localStorage.getItem("tblManpowerAddApplicantList"));i=function(){var n=$("#divMRFAddApplicantModal .jqgfirstrow").height();$("#divMRFAddApplicantModal .jqgfirstrow td .filterFields").each(function(){$(this).appendTo("#divMRFAddApplicantModal #filterFieldsContainer")});$("#divMRFAddApplicantModal .jqgfirstrow").css({height:n+"px"});$("#divMRFAddApplicantModal div.filterFields").unbind("keyup");$("#divMRFAddApplicantModal div.filterFields").keyup(function(n){n.keyCode=="13"&&$("#divMRFAddApplicantModal #btnSearch").click()})};i();$("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid("GridUnload");$("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid("GridDestroy");$("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid({url:MRFAddApplicantModalListURL,postData:n,sortname:t==null?"":t.sortname,sortorder:t==null?"":t.sortorder,selrow:t==null?"":t.selrow,pageNumber:t==null?1:t.page,rowNum:t==null?10:t.rowNum,datatype:"json",mtype:"GET",colNames:["","","","For Hiring","","Applicant Name","Application Status","Date Scheduled","Date Completed","Approver Remarks","Status","","","","",""],colModel:[{hidden:!0},{width:25,key:!0,hidden:!0,name:"MRFApplicantID",index:"MRFApplicantID",align:"center",sortable:!0},{width:35,name:"",formatter:objMRFAddApplicantListJS.RemoveRecordLink,align:"center"},{width:35,name:"ForHiring",formatter:objMRFAddApplicantListJS.ForHiringCheckBox,align:"center",hidden:!0},{width:35,name:"",align:"center",sortable:!0,hidden:!0,formatter:objMRFAddApplicantListJS.WorkflowTransactionLink},{name:"ApplicantName",index:"ApplicantName",align:"left",sortable:!0,formatter:objMRFAddApplicantListJS.ViewApplicantLink},{name:"CurrentStep",index:"CurrentStep",align:"left",sortable:!0},{name:"DateScheduled",index:"DateScheduled",align:"left",sortable:!0},{name:"DateCompleted",index:"DateCompleted",align:"left",sortable:!0},{name:"ApproverRemarks",index:"ApproverRemarks",align:"left",sortable:!0},{name:"Status",index:"Status",align:"left",sortable:!0,hidden:!0},{name:"WorkflowID",index:"WorkflowID",hidden:!0},{name:"CurrentStepCode",index:"CurrentStepCode",hidden:!0},{name:"CurrentResult",index:"CurrentResult",hidden:!0},{name:"ResultType",index:"ResultType",hidden:!0},{name:"ID",index:"ID",hidden:!0}],toppager:$("#divMRFAddApplicantModal #divManpowerAddApplicantPager"),rowList:SetRowList(),loadonce:!1,viewrecords:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1},emptyrecords:"No records to display",multiselect:!0,rowNumbers:!0,width:"100%",height:"100%",sortable:!0,loadComplete:function(n){var r,t;if(Loading(!1),n.IsSuccess!=undefined&&(n.IsSuccess||($("#divMRFAddApplicantModal #divErrorMessage").html(""),ModalAlert(MODAL_HEADER,n.Result))),n.rows!=null){if(r=0,n.rows.length>0){var e="",u="",f="",i="";for(t=0;t<n.rows.length;t++)$("#hdnIDForHiring").val()==n.rows[t].ID&&$("#chkForHiring_"+n.rows[t].ID).prop("checked",!0),n.rows[t].Status=="COMPLETED"&&(r++,$("#"+n.rows[t].MRFApplicantID).css({background:"#EEFFEE"}),$("#hdnIsHiredApplicantID").val(n.rows[t].ID),$("#hdnNameForHiring").val($("#tblManpowerAddApplicantList").jqGrid("getCell",n.rows[t].MRFApplicantID,"ApplicantName").replace("<a","<b").replace("<\/a","<\/b")),i=n.rows[t].ApplicantName,u=n.rows[t].ApproverRemarks),n.rows[t].CurrentStep=="6-HIRED"&&(f=n.rows[t].ApplicantName,e=n.rows[t].ApproverRemarks),n.rows[t].CurrentStep=="7-DEPLOYED"&&$("#hdnDeployedDateHired").val(n.rows[t].DateCompleted);(f!=""||i!="")&&($("#PrintEmployeeName").text(i!=""?i:f),$("#PrintHiredRemarks").text(u!=""?u:e));r>0&&$("#btnCloseRequest").show();$("#hdnMRFStatus").val()=="CLOSED"&&($(".for-hiring-checkboxes").prop("disabled",!0),$("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid("hideCol",[""]))}AutoSizeColumnJQGrid("tblManpowerAddApplicantList",n);$("#divMRFAddApplicantModal #filterFieldsContainer .filterFields").each(function(n){$(this).appendTo("#divMRFAddApplicantModal .jqgfirstrow td:nth-child("+(n+2)+")")});$(".for-hiring-checkboxes").click(function(){$(this).prop("checked")&&($(".for-hiring-checkboxes").prop("checked",!1),$(this).prop("checked",!0),$("#divMRFAddApplicantErrorMessage").html(""));ModalConfirmation(MODAL_HEADER,MSG_CONFIRM_UPDATE_FOR_HIRING_MRF,"objMRFAddApplicantListJS.UpdateForHiringApplicant("+$(this).prop("id")+","+$("#divMRFAddApplicantModal #hdnID").val()+","+$(this).prop("id").replace("chkForHiring_","")+","+$(this).prop("checked")+")","function","objMRFAddApplicantListJS.CancelUpdateForHiringApplicant()")});$("#hdnHasRemoveApplicantFeature").val()=="false"&&($("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid("hideCol",["ID"]),$("#divMRFAddApplicantModal #tblManpowerAddApplicantList").jqGrid("hideCol",[""]))}$("#divMRFAddApplicantModal .ui-jqgrid-bdiv").css({"min-height":"400px"});$("#divMRFAddApplicantModal table tr.jqgfirstrow td").each(function(n){var t=n+1;$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+")").find("input[type='search']").length&&$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+")").find("input[type='number']").length&&$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+")").find("div.multiselect-control").length&&$("#divMRFAddApplicantModal table .jqgfirstrow td:nth-child("+t+") div.multiselect-control").text()!=""&&($("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$("#divMRFAddApplicantModal .ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'))})},onSelectRow:function(){$("#divMRFAddApplicantErrorMessage").html("");$("#divMRFAddApplicantErrorMessage").hide()},loadError:function(n){ModalAlert(MODAL_HEADER,n.responseText);Loading(!1)},beforeRequest:function(){GetJQGridState("tblManpowerAddApplicantList");i()}}).navGrid("#divMRFAddApplicantModal #divManpowerAddApplicantPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});jQuery("#divMRFAddApplicantModal .ui-pg-selbox").closest("select").before('<label class="ui-row-label">Show<\/label>')},SetLocalStorage:function(){localStorage.AddApplicantListID=$("#divMRFAddApplicantModal #txtFilterApplicantID").val();localStorage.AddApplicantListForHiringID=$("#hdnIDForHiring").val();localStorage.AddApplicantListApplicantName=$("#divMRFAddApplicantModal #txtFilterApplicantName").val();localStorage.AddApplicantListCurrentStepDelimited=objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedCurrentStep").value;localStorage.AddApplicantListCurrentStepDelimitedText=objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedCurrentStep").text;localStorage.AddApplicantListStatusDelimited=objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedStatus").value;localStorage.AddApplicantListStatusDelimitedText=objEMSCommonJS.GetMultiSelectList("divMRFAddApplicantModal #multiSelectedStatus").text;localStorage.AddApplicantListScheduledFrom=$("#divMRFAddApplicantModal #txtFilterScheduledFrom").val();localStorage.AddApplicantListScheduledTo=$("#divMRFAddApplicantModal #txtFilterScheduledTo").val();localStorage.AddApplicantListCompletedFrom=$("#divMRFAddApplicantModal #txtFilterCompletedFrom").val();localStorage.AddApplicantListCompletedTo=$("#divMRFAddApplicantModal #txtFilterCompletedTo").val();localStorage.AddApplicantListApproverRemarks=$("#divMRFAddApplicantModal #txtFilterApproverRemarks").val()},GetLocalStorage:function(){$("#divMRFAddApplicantModal #txtFilterApplicantID").val(localStorage.AddApplicantListID);$("#divMRFAddApplicantModal #txtFilterApplicantName").val(localStorage.AddApplicantListApplicantName);objEMSCommonJS.SetMultiSelectList("divMRFAddApplicantModal #multiSelectedCurrentStep","AddApplicantListCurrentStepDelimited","AddApplicantListCurrentStepDelimitedText");objEMSCommonJS.SetMultiSelectList("divMRFAddApplicantModal #multiSelectedStatus","AddApplicantListStatusDelimited","AddApplicantListStatusDelimitedText");$("#divMRFAddApplicantModal #txtFilterScheduledFrom").val(localStorage.AddApplicantListScheduledFrom);$("#divMRFAddApplicantModal #txtFilterScheduledTo").val(localStorage.AddApplicantListScheduledTo);$("#divMRFAddApplicantModal #txtFilterCompletedFrom").val(localStorage.AddApplicantListCompletedFrom);$("#divMRFAddApplicantModal #txtFilterCompletedTo").val(localStorage.AddApplicantListCompletedTo);$("#divMRFAddApplicantModal #txtFilterApproverRemarks").val(localStorage.AddApplicantListApproverRemarks)},FormatAmount:function(n,t,i){return AddZeroes(i.ExpectedSalary+"").withComma()},RemoveRecordLink:function(n,t,i){return'<a href="" onclick="ModalConfirmation(MODAL_HEADER, MSG_CONFIRM_DELETE_SINGLE, \'objMRFAddApplicantListJS.RemoveApplicant('+i.ID+")', 'function'); return false;\"><span class='btn-glyph-dynamic glyphicon glyphicon-trash'><\/span><\/a>"},DeleteSuccessFunction:function(){LoadPartial(MRFAddApplicantModalURL+"?ID="+$("#divMRFAddApplicantModal #hdnID").val()+"","divMRFAddApplicantBodyModal")},RemoveApplicant:function(n){objEMSCommonJS.PostAjax(!1,MRFAddApplicantModalRemoveApplicantURL+"?MRFID="+$("#divMRFAddApplicantModal #hdnID").val()+"&MRFApplicantID="+n,{},"#divMRFAddApplicantModal #divErrorMessage","",objMRFAddApplicantListJS.DeleteSuccessFunction)},ViewApplicantLink:function(n,t,i){return'<a href="" onclick="return objMRFAddApplicantListJS.ShowApplicantDetails('+i.ID+",'"+RecruitmentApplicantViewURL+"?ID="+i.ID+"', 'divApplicantBodyModal');\">"+i.ApplicantName+"<\/a>"},WorkflowTransactionLink:function(n,t,i){return'<a href="" onclick="return objMRFAddApplicantListJS.ShowWorkflowTransaction('+i.ID+", "+i.WorkflowID+", "+i.MRFApplicantID+', \'divWorkflowTransactionBodyModal\');"><span class="btn-glyph-dynamic"><span class="glyphicon glyphicon-pencil"><\/span><\/span><\/a>'},ForHiringCheckBox:function(n,t,i){return'<input type="checkbox" class="for-hiring-checkboxes" id="chkForHiring_'+i.ID+'" title="For Hiring">'},UpdateStatusMRFRequest:function(n,t){var i=function(){$("#divMRFList #btnSearch").click();LoadPartial(MRFAddApplicantModalURL+"?ID="+$("#divMRFAddApplicantModal #hdnID").val()+"","divMRFAddApplicantBodyModal")};objEMSCommonJS.PostAjax(!0,MRFUpdateStatusURL+"?ID="+n+"&Status="+t+"&MRFTransactionID="+$("#MRFTransactionID").val()+"&ApplicantID="+$("#hdnIsHiredApplicantID").val(),objMRFAddApplicantListJS.GetCloseMRFFormData(),"#divMRFAddApplicantModal #divErrorMessage","",i)},GetCloseMRFFormData:function(){var n=new FormData($("#frmTransactionAdd").get(0));return n.append("MRFStatus.ID",$("#divMRFAddApplicantModal #hdnID").val()),n.append("MRFStatus.Status",$("#btnCloseRequest").val()),n.append("Applicants.MRFTransactionID",$("#MRFTransactionID").val()),n.append("Applicants.HiredApplicantID",$("#hdnIsHiredApplicantID").val()),$($("#tblManpowerAddApplicantList").jqGrid("getRowData")).each(function(t,i){$("#hdnIsHiredApplicantID").val()!=i.ID&&n.append("Applicants.ApplicantIDs["+t+"]",i.ID)}),n},ShowApplicantDetails:function(n,t,i){$("#divApplicantModal").modal("show");$("#hdnMRFApplicantID").val(n);var r=function(){$("#divApplicantModal #btnDelete").remove();$("#divApplicantModal .close").click(function(){$("#divApplicantModal").modal("hide");objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApplicants","#divMRFAddApplicantModal")})};return LoadPartialSuccessFunction(t,i,r),!1},ShowWorkflowTransaction:function(n,t,i){return $("#divMRFAddApplicantModal").modal("hide"),$("#divWorkflowTransactionModal").modal("show"),$("#ddlResult option").remove(),$("#frmTransactionAdd .form-control").val(""),$("#hdnWorkflowID").val(t),$("#hdnMRFApplicantID").val(i),GenerateDropdownValues(GetWorkflowStepDropDownURL+"&WorkflowID="+t,"ddlStep","Value","Text","","",!1),$("#divWorkflowTransactionModal .close").click(function(){$("#divMRFAddApplicantModal").modal("show");$("#divWorkflowTransactionModal").modal("hide")}),$("#ddlStep").unbind("change"),$("#ddlStep").change(function(){if($(this).val()!=""){var n=function(n){var t=function(n){$("#ddlResult option").remove();objEMSCommonJS.PopulateDropDown("#ddlResult",n.Result)};objEMSCommonJS.GetAjax(MRFAddApplicantReferenceValueURL+"&RefCode="+n.Result.ResultType,{},"",t)};objEMSCommonJS.GetAjax(MRFAddApplicantWorkflowStepURL+"&WorkflowID="+t+"&StepCode="+$(this).val(),{},"",n)}else $("#ddlResult option").remove()}),objMRFAddApplicantListJS.WorkflowTransactionJQGrid({WorkflowID:$("#hdnWorkflowID").val(),MRFApplicantID:$("#hdnMRFApplicantID").val()}),!1},WorkflowTransactionJQGrid:function(n){var t=this;Loading(!0);$("#tblWorkflowTransactionList").jqGrid("GridUnload");$("#tblWorkflowTransactionList").jqGrid("GridDestroy");$("#tblWorkflowTransactionList").jqGrid({url:MRFAddApplicantWorkflowTransactionURL,postData:n,sortname:"",sortorder:"",selrow:"",pageNumber:1,rowNum:1e4,datatype:"json",mtype:"GET",colNames:["","Order","Step","Status","Date Scheduled","Date Completed","Timestamp","Remarks"],colModel:[{name:"",hidden:!0},{name:"Order",index:"Type",align:"left",sortable:!1,hidden:!0},{name:"Step",index:"Title",align:"left",sortable:!1},{name:"Status",index:"Status",align:"left",sortable:!1},{name:"DateScheduled",index:"DateScheduled",align:"left",sortable:!1},{name:"DateCompleted",index:"DateCompleted",align:"left",sortable:!1},{name:"Timestamp",index:"Timestamp",align:"left",sortable:!1},{name:"Remarks",index:"Remarks",align:"left",sortable:!1}],rowList:SetRowList(),loadonce:!1,viewrecords:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1},emptyrecords:"No records to display",multiselect:!1,rowNumbers:!0,width:"100%",height:"100%",sortable:!0,loadComplete:function(n){if(Loading(!1),n.IsSuccess!=undefined&&(n.IsSuccess||($("#divErrorMessage").html(""),ModalAlert(MODAL_HEADER,n.Result))),n.rows!=null){if(n.rows.length>0)for(var t=0;t<n.rows.length;t++);AutoSizeColumnJQGrid("tblWorkflowTransactionList",n)}},loadError:function(n){ModalAlert(MODAL_HEADER,n.responseText);Loading(!1)}})},UpdateForHiringApplicant:function(n,t,i,r){var u=function(){LoadPartial(MRFAddApplicantModalURL+"?ID="+$("#divMRFAddApplicantModal #hdnID").val()+"","divMRFAddApplicantBodyModal")};objEMSCommonJS.PostAjax(!1,MRFUpdateForHiringURL+"?MRFID="+t+"&MRFApplicantID="+i+"&ForHiring="+r,{},"#divMRFAddApplicantModal #divErrorMessage","",u)},CancelUpdateForHiringApplicant:function(){$(".for-hiring-checkboxes").prop("checked",!1);$("#chkForHiring_"+$("#hdnIDForHiring").val()).prop("checked",!0)},EncodeEmployee:function(n){$("#divModal").modal("hide");$("#divMRFAddApplicantModal").modal("hide");$("#divEmployeeModal").modal("show");var t=function(){var t=function(n){var t=new Date(n.Result.PersonalInformation.BirthDate),i=t.getMonth()+1,r=t.getDate(),u=t.getFullYear(),f=$("#divMRFAddApplicantModal #lblOrgGroup").text(),e=$("#divMRFAddApplicantModal #lblPosition").text();$("#divEmployeeBodyModal #txtLastName").val(n.Result.PersonalInformation.LastName);$("#divEmployeeBodyModal #txtFirstName").val(n.Result.PersonalInformation.FirstName);$("#divEmployeeBodyModal #txtMiddleName").val(n.Result.PersonalInformation.MiddleName);$("#divEmployeeBodyModal #dpBirthDate").val(i+"/"+r+"/"+u);$("#divEmployeeBodyModal #txtAddressLine1").val(n.Result.PersonalInformation.AddressLine1);$("#divEmployeeBodyModal #txtAddressLine2").val(n.Result.PersonalInformation.AddressLine2);$("#divEmployeeBodyModal #ddlPSGCRegion").val(n.Result.PersonalInformation.PSGCRegion);$("#divEmployeeBodyModal #PSGCRegion").val(n.Result.PersonalInformation.PSGCRegion);GenerateDropdownValues(GetCityDropDownByRegionURL+"&RegionID="+$("#divEmployeeBodyModal #ddlPSGCRegion").val(),"divEmployeeBodyModal #ddlPSGCCity","Value","Text","","",!1);$("#divEmployeeBodyModal #ddlPSGCCity").val(n.Result.PersonalInformation.PSGCCity);$("#divEmployeeBodyModal #PSGCCity").val(n.Result.PersonalInformation.PSGCCity);$("#divEmployeeBodyModal #txtEmail").val(n.Result.PersonalInformation.Email);$("#divEmployeeBodyModal #txtCellphoneNumber").val(n.Result.PersonalInformation.CellphoneNumber);document.getElementById("txtCellphoneNumber").value=$("#divEmployeeBodyModal #txtCellphoneNumber").val().substr(3);$('label[for="txtSystemUserName"]').hide();$("#divEmployeeBodyModal #txtSystemUserName").hide();$("#divEmployeeBodyModal #btnSave").click(function(){objEmployeeAddJS.AddSuccessFunction=function(){$("#divEmployeeModal").modal("hide");$("#divMRFList #btnSearch").click()}});$("#divEmployeeModal #ddlStatus").val("PROBATIONARY");$("#divEmployeeModal #ddlOrgGroup option:contains("+f+")").attr("selected","selected");$("#divEmployeeModal #ddlPosition option:contains("+e+")").attr("selected","selected");$("#divEmployeeModal .close").click(function(){$("#divEmployeeModal").modal("hide");$("#divMRFAddApplicantModal").modal("show");objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApplicants","#divMRFAddApplicantModal")})};objEMSCommonJS.GetAjax(GetApplicantInfoURL+"&ID="+n,{},"",t)};LoadPartialSuccessFunction(EmployeeAddURL,"divEmployeeBodyModal",t)},ConvertApplicant:function(n,t,i){var r=$("#hdnDeployedDateHired").val(),u=function(){$("#divMRFList #btnSearch").click();LoadPartial(MRFAddApplicantModalURL+"?ID="+$("#divMRFAddApplicantModal #hdnID").val()+"","divMRFAddApplicantBodyModal");var u=function(n){var t='<button type="button" id="btnUploadFile" class="btnBlue formbtn button-width-auto" onclick="objMRFAddApplicantListJS.LoadEmployeeDetails(\''+EmployeeEditURL+"?ID="+n.Result+"', 'divEmployeeBodyModal');\">Edit Employee<\/button>";t+='&nbsp <button type="button" id="btnModalClose" class="btnBlue formbtn" data-dismiss="modal">Close<\/button>';$("#divHeaderModal").html(MODAL_HEADER);$("#divBodyModal").html(MSG_SUCCESS_SAVED);$("#divFooterModal").html(t)};objEMSCommonJS.GetAjax(ConvertApplicantURL+"&ApplicantID="+n+"&OrgGroupID="+t+"&PositionID="+i+"&DateHired="+r,{},"",u)};objEMSCommonJS.PostAjax(!0,MRFUpdateStatusURL+"?ID="+n+"&Status=CLOSED&MRFTransactionID="+$("#MRFTransactionID").val()+"&ApplicantID="+$("#hdnIsHiredApplicantID").val(),objMRFAddApplicantListJS.GetCloseMRFFormData(),"#divMRFAddApplicantModal #divErrorMessage","",u,null,!0)},LoadEmployeeDetails:function(n,t){$("#divModal").modal("hide");$("#divMRFAddApplicantModal").modal("hide");$("#divEmployeeModal").modal("show");var i=function(){$("#divMRFList #btnSearch").click()};return LoadPartialSuccessFunction(n,t,i),!1},AddSystemUser:function(n,t,i,r,u){var f="&FirstName="+n+"&MiddleName="+t+"&LastName="+i+"&ApplicantID="+r+"&MRFTransactionID="+u,e=function(){};objEMSCommonJS.GetAjax(AddSystemUserURL+f,{},"",e)},GetCompanyDropDown:function(){var t=this,n=function(n){$(n.Result).each(function(n,t){CompanyDropDown.push({Value:t.Value,Text:t.Text})})};objEMSCommonJS.GetAjax(CompanyDropDownURL,{},"",n)},ConvertConfirmation:function(n,t,i,r){var u="";i!=""&&(u+='<button type="button" id="btnCloseMRF" class="btnBlue formbtn button-width-auto" onclick="'+i+'">Close Only<\/button>&nbsp;');r!=""&&(u+='<button type="button" id="btnConvertApplicant" class="btnBlue formbtn button-width-auto" onclick="'+r+'">Close and Convert<\/button>&nbsp;');u+='<button type="button" id="btnCloseConfirmationModal" class="btnBlue formbtn button-width-auto" data-dismiss="modal">Cancel<\/button>';$("#divHeaderModal").html(n);$("#divBodyModal").html(t);$("#divFooterModal").html(u);$("#divModal").modal({backdrop:"static",keyboard:!1})}};objMRFAddApplicantListJS.Initialize()});