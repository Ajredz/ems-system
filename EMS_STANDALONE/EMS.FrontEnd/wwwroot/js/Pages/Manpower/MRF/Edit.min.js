var objMRFEditJS,originalForm,MRFRevisePostURL=window.location.pathname+"/Edit?handler=Revise";$(document).ready(function(){objMRFEditJS={ID:$("#hdnID").val(),Initialize:function(){var n=this;n.ElementBinding();$(".reqField").addClass(".unreqField");$(".reqField").removeClass(".reqField");$("#btnEdit, #btnRevise").hide();$("#hdnStatusCode").val()=="REJECTED"?$("#btnReviseSave, #btnReviseBack").show():($("#btnSave, #btnBack").show(),$("#btnDelete").hide());$("#divMRFModal .form-control").attr("readonly",!1);$("#txtVacancy, #ddlOrgGroup, #ddlPositionLevel, #ddlPosition").attr("readonly",!0);$("#ddlPosition").change();objMRFListJS.LoadApprovalHistoryJQGrid({RequestingPositionID:$("#ddlPosition").val(),RequestingOrgGroupID:$("#ddlOrgGroup").val(),PositionID:$("#ddlPosition").val(),MRFID:$("#hdnID").val()});objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApprovalHistory");objMRFListJS.GetComment();$("#ddlNatureOfEmployment option[value='PART_TIME'],             #ddlNatureOfEmployment option[value='PROJ_BASED'],             #ddlNatureOfEmployment option[value='EXTERNAL']").prop("disabled",!0);originalForm=$("#frmMRF").serialize()},ElementBinding:function(){var n=this;NumberOnly($("#divMRFModal #txtTurnaroundTime"));$("#ddlOrgGroup").change(function(){$("#ddlOrgGroup").val()!=""&&$("input[name='MRF.OrgGroupID']").val($("#ddlOrgGroup").val())});$("#btnSaveComment").click(function(){$("#txtAreaComments").val()!=""?objEMSCommonJS.PostAjax(!0,SaveMRFCommentsURL,objMRFListJS.GetCommentSectionFormData(),"#divMRFErrorMessage","#btnSaveComment",objMRFListJS.GetComment,null,!0):$("#txtAreaComments").focus()});$("#ddlPosition").change(function(){$("#ddlPosition").val()!=""?(objMRFListJS.LoadApprovalHistoryJQGrid({PositionID:$("#ddlPosition").val(),MRFID:$("#hdnID").val()}),$("input[name='MRF.PositionID']").val($("#ddlPosition").val())):$("#divSignatories").html("")});$("#btnDelete").click(function(){ModalConfirmation(MODAL_HEADER,MSG_CONFIRM_DELETE_SINGLE,"objEMSCommonJS.PostAjax(false                     , MRFDeleteURL + '?ID=' + objMRFEditJS.ID                     , {}                     , '#divMRFErrorMessage'                     , '#btnDelete'                     , objMRFEditJS.DeleteSuccessFunction);","function")});$("#btnSave").click(function(){objEMSCommonJS.ValidateBlankFields("#frmMRF","#divMRFErrorMessage")&&ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objEMSCommonJS.PostAjax(true                         , MRFEditPostURL                         , new FormData($('#frmMRF').get(0))                         , '#divMRFErrorMessage'                         , '#btnSave'                         , objMRFEditJS.EditSuccessFunction);","function")});$("#btnReviseSave").click(function(){objEMSCommonJS.ValidateBlankFields("#frmMRF","#divMRFErrorMessage")&&(originalForm!=$("#frmMRF").serialize()?$("#hdnStatusCode").val()=="REJECTED"&&ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objEMSCommonJS.PostAjax(true                                 , MRFRevisePostURL                                 , new FormData($('#frmMRF').get(0))                                 , '#divMRFErrorMessage'                                 , '#btnReviseSave'                                 , objMRFEditJS.EditSuccessFunction);","function"):$("#frmMRF #divMRFErrorMessage").html('<label class="errMessage"><li>'+NO_CHANGE_FORM+"<\/li><\/label><br />"))});$("#btnBack, #btnReviseBack").click(function(){LoadPartial(MRFViewURL+"?ID="+objMRFEditJS.ID,"divMRFBodyModal")})},DeleteSuccessFunction:function(){$("#btnSearch").click();$("#divMRFModal").modal("hide")},EditSuccessFunction:function(){$("#tblMRFFormApprovalHistoryList").jqGrid("GridUnload");$("#tblMRFFormApprovalHistoryList").jqGrid("GridDestroy");$("#btnSearch").click();$("#btnBack").click()},AddSignatoriesDynamicFields:function(n){$("#divSignatories").html("");$(n.Result).each(function(n,t){var i=t.ApprovalStatusCode=="PENDING"?"#FF6D0D":t.ApprovalStatusCode=="FOR_APPROVAL"?"#4949FF":t.ApprovalStatusCode=="APPROVED"?"#029902":t.ApprovalStatusCode=="REJECTED"?"#FF0000":"";$("#divSignatories").append('<div class="form-group form-fields"> \t<div class="col-md-2-5 col-label"> \t\t<label class="control-label block-label"> <span class="unreqField">* <\/span>'+t.ApproverDescription+'<\/label> \t<\/div> \t<div class="col-md-4-5"> \t\t<input type="text" class="form-control" value="'+t.ApproverName+'" title="Approver Description" readonly> \t<\/div> \t<div class="col-md-1 col-label"> \t\t<label class="control-label block-label">'+t.ApprovalTAT+' day(s)<\/label> \t<\/div> \t<div class="col-md-1-5 col-label"> \t\t<label class="control-label block-label" style="color:'+i+'">'+t.ApprovalStatus+'<\/label> \t<\/div> \t<div class="col-md-2 col-label"> \t\t<label class="control-label block-label">'+t.ApprovedDate+"<\/label> \t<\/div> <\/div>")})}};objMRFEditJS.Initialize()});
