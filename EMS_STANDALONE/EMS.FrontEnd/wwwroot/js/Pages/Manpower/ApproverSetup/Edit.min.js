var objMRFApprovalEditJS;$(document).ready(function(){objMRFApprovalEditJS={ID:$("#hdnID").val(),Initialize:function(){var n=this;n.ElementBinding();$(".reqField").addClass("unreqField");$(".reqField").removeClass("reqField");$(".required-field").removeClass("required-field");$("#divMRFApprovalModal .form-control").prop("disabled",!0);objMRFApprovalListJS.LoadApprovalHistoryJQGrid({PositionID:$("#ddlPosition").val(),RequestingPositionID:$("#hdnRequestingPositionID").val(),RequestingOrgGroupID:$("#hdnRequestingOrgGroupID").val(),MRFID:$("#hdnID").val()});objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabApprovalHistory");objMRFApprovalListJS.GetComment()},ElementBinding:function(){var n=this;NumberOnly($("#divMRFApprovalModal #txtTurnaroundTime"));$("#btnApprove, #btnReject").click(function(){$("#btnProceed").val($(this).val());$("#divMRFRemarksModal").modal("show")});$("#btnProceed").click(function(){var n=function(){if($("#btnProceed").val()=="REJECTED"&&$("#txtApprovalRemarks").val()=="")$("#divMRFRemarksErrorMessage").html('<label class="errMessage"><li>Remarks is required<\/li><\/label><br />'),$("#txtApprovalRemarks").addClass("errMessage");else return!0};objEMSCommonJS.ValidateBlankFields("#frmMRFApproval","#divMRFApprovalErrorMessage",n)&&ModalConfirmation(MODAL_HEADER,MSG_CONFIRM_PROCEED,"objEMSCommonJS.PostAjax(true                           , MRFApprovalEditPostURL                           , objMRFApprovalEditJS.GetFormData()                           , '#divMRFApprovalErrorMessage'                           , '#btnSave'                           , objMRFApprovalEditJS.EditSuccessFunction);","function")});$("#divMRFRemarksHeaderModal .close").click(function(){$("#divMRFRemarksErrorMessage").html("");$("#txtApprovalRemarks").removeClass("errMessage");$("#txtApprovalRemarks").val()});$("#btnSaveComment").click(function(){$("#txtAreaComments").val()!=""?objEMSCommonJS.PostAjax(!0,SaveCommentsURL,objMRFApprovalListJS.GetCommentSectionFormData(),"#divMRFErrorMessage","#btnSaveComment",objMRFApprovalListJS.GetComment,null,!0):$("#txtAreaComments").focus()})},GetFormData:function(){var n=new FormData($("#frmMRFApproval").get(0));return n.append("RecordID",objMRFApprovalEditJS.ID),n.append("LevelOfApproval",$("#hdnLevelOfApproval").val()),n.append("Result",$("#btnProceed").val()),n.append("NextApproverPositionID",$("#hdnNextApproverPositionID").val()),n.append("NextApproverOrgGroupID",$("#hdnNextApproverOrgGroupID").val()),n.append("Remarks",$("#txtApprovalRemarks").val()),n},EditSuccessFunction:function(){$("#txtApprovalRemarks").val("");$("#divMRFApprovalFilter #btnSearch").click();$("#divMRFRemarksModal .close").click();LoadPartial(""+MRFApprovalEditURL+"?ID="+objMRFApprovalEditJS.ID+"&RecordStatus="+$("#lblMRFStatus").text()+"","divMRFApprovalBodyModal")},AddSignatoriesDynamicFields:function(n){$("#divSignatories").html("");$(n.Result).each(function(n,t){var i=t.ApprovalStatusCode=="PENDING"?"#FF6D0D":t.ApprovalStatusCode=="FOR_APPROVAL"?"#4949FF":t.ApprovalStatusCode=="APPROVED"?"#029902":t.ApprovalStatusCode=="REJECTED"?"#FF0000":"";$("#divSignatories").append('<div class="form-group form-fields"> \t<div class="col-md-2-5 col-label"> \t\t<label class="control-label block-label"> <span class="unreqField">* <\/span>'+t.ApproverDescription+'<\/label> \t<\/div> \t<div class="col-md-4-5"> \t\t<input type="text" class="form-control" value="'+t.ApproverName+'" title="Approver Description" readonly> \t<\/div> \t<div class="col-md-1 col-label"> \t\t<label class="control-label block-label">'+t.ApprovalTAT+' day(s)<\/label> \t<\/div> \t<div class="col-md-1-5 col-label"> \t\t<label class="control-label block-label" style="color:'+i+'">'+t.ApprovalStatus+'<\/label> \t<\/div> \t<div class="col-md-2 col-label"> \t\t<label class="control-label block-label">'+t.ApprovedDate+"<\/label> \t<\/div> <\/div>")})}};objMRFApprovalEditJS.Initialize()});