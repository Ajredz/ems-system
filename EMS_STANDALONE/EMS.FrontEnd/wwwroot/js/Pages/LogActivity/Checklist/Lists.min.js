var objChecklistListJS;const ChecklistListURL="/LogActivity/Checklist?handler=List",GetApplicantLogActivitiesURL="/LogActivity/Checklist?handler=ApplicantLogActivities",GetCurrentStatusURL="/LogActivity/Checklist?handler=ReferenceValue&RefCode=ACTIVITY_STAT_FILTER",GetTypeURL="/LogActivity/Checklist?handler=ReferenceValue&RefCode=ACTIVITY_TYPE",GetSubTypeURL="/LogActivity/Checklist?handler=LogActivitySubType",UpdateLogActivityURL="/LogActivity/Checklist/Edit",UpdateApplicantLogActivityPostURL="/LogActivity/Checklist/Edit?handler=Applicant",UpdateEmployeeLogActivityPostURL="/LogActivity/Checklist/Edit?handler=Employee",ReferredByAutoComplete="/LogActivity/Checklist?handler=ReferredBy",GetApplicantLogActivityStatusHistoryURL="/LogActivity/Checklist?handler=ApplicantLogActivityStatusHistory",GetEmployeeLogActivityStatusHistoryURL="/LogActivity/Checklist?handler=EmployeeLogActivityStatusHistory",GetApplicantCommentsURL="/LogActivity/Checklist/Edit?handler=ApplicantComments",SaveApplicantCommentsURL="/LogActivity/Checklist/Edit?handler=SaveApplicantComments",GetEmployeeCommentsURL="/LogActivity/Checklist/Edit?handler=EmployeeComments",SaveEmployeeCommentsURL="/LogActivity/Checklist/Edit?handler=SaveEmployeeComments",GetApplicantAttachmentURL="/LogActivity/Checklist/Edit?handler=ApplicantAttachment",SaveApplicantAttachmentURL="/LogActivity/Checklist/Edit?handler=SaveApplicantAttachment",GetEmployeeAttachmentURL="/LogActivity/Checklist/Edit?handler=EmployeeAttachment",SaveEmployeeAttachmentURL="/LogActivity/Checklist/Edit?handler=SaveEmployeeAttachment",CheckFileIfExistsURL="/LogActivity/Checklist/Edit?handler=CheckFileIfExists",DownloadFileURL="/LogActivity/Checklist/Edit?handler=DownloadFile",AttachmentTypeDropDown="/LogActivity/Checklist/Edit?handler=ReferenceValue&RefCode=ATTACHMENT_TYPE",GetCheckExportListURL="/LogActivity/Checklist?handler=CheckExportList",DownloadExportListURL="/LogActivity/Checklist?handler=DownloadExportList";$(document).ready(function(){objChecklistListJS={Initialize:function(){var n=this,t;n.ElementBinding();t={TypeDelimited:localStorage.ChecklistListType,Title:localStorage.ChecklistListTitle,CurrentStatusDelimited:localStorage.ChecklistListCurrentStatus,CurrentTimestampFrom:localStorage.ChecklistListCurrentTimestampFrom,CurrentTimestampTo:localStorage.ChecklistListCurrentTimestampTo,DueDateFrom:localStorage.ChecklistListDueDateFrom,DueDateTo:localStorage.ChecklistListDueDateTo,AssignedByDelimited:localStorage.ChecklistListAssignedBy,AssignedToDelimited:localStorage.ChecklistListAssignedTo};n.LoadJQGrid(t);n.GetLocalStorage();objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabHistory","#divLogActivityModal")},ElementBinding:function(){var n=this;$("#txtFilterCurrentTimestampFrom, #txtFilterCurrentTimestampTo").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});$("#txtFilterDueDateFrom, #txtFilterDueDateTo").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});objEMSCommonJS.BindFilterMultiSelectAutoComplete("txtFilterAssignedBy",ReferredByAutoComplete,20,"multiSelectedAssignedBy");objEMSCommonJS.BindFilterMultiSelectAutoComplete("txtFilterAssignedTo",ReferredByAutoComplete,20,"multiSelectedAssignedTo");$("#btnSearch").click(function(){var t={TypeDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedType").value,Title:$("#txtFilterTitle").val(),CurrentStatusDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedCurrentStatus").value,CurrentTimestampFrom:$("#txtFilterCurrentTimestampFrom").val(),CurrentTimestampTo:$("#txtFilterCurrentTimestampTo").val(),DueDateFrom:$("#txtFilterDueDateFrom").val(),DueDateTo:$("#txtFilterDueDateTo").val(),AssignedByDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedBy").value,AssignedToDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedTo").value};n.SetLocalStorage();ResetJQGridState("tblChecklistList");n.LoadJQGrid(t)});$("#btnReset").click(function(){$("div.filterFields input[type='search']").val("");$("div.filterFields select").val("");$("div.filterFields input[type='checkbox']").prop("checked",!0);$("#multiSelectedType").html("");$("#multiSelectedTypeOption label, #multiSelectedTypeOption input").prop("title","add");$("#multiSelectedCurrentStatus").html("");$("#multiSelectedCurrentStatusOption label, #multiSelectedCurrentStatusOption input").prop("title","add");$("#multiSelectedAssignedBy").html("");$("#multiSelectedAssignedByOption label, #multiSelectedAssignedByOption input").prop("title","add");$("#multiSelectedAssignedTo").html("");$("#multiSelectedAssignedToOption label, #multiSelectedAssignedToOption input").prop("title","add");$("#btnSearch").click()});$("#btnExport").click(function(){ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objChecklistListJS.ExportFunction()","function")});objEMSCommonJS.BindFilterMultiSelectEnumValueDisplay("multiSelectedType",GetTypeURL,"Value","Description");objEMSCommonJS.BindFilterMultiSelectEnumValueDisplay("multiSelectedCurrentStatus",GetCurrentStatusURL,"Value","Description")},ExportFunction:function(){var n="&sidx="+$("#tblChecklistList").jqGrid("getGridParam","sortname")+"&sord="+$("#tblChecklistList").jqGrid("getGridParam","sortorder")+"&TypeDelimited="+objEMSCommonJS.GetMultiSelectList("multiSelectedType").value+"&Title="+$("#txtFilterTitle").val()+"&CurrentStatusDelimited="+objEMSCommonJS.GetMultiSelectList("multiSelectedCurrentStatus").value+"&CurrentTimestampFrom="+$("#txtFilterCurrentTimestampFrom").val()+"&CurrentTimestampTo="+$("#txtFilterCurrentTimestampTo").val()+"&DueDateFrom="+$("#txtFilterDueDateFrom").val()+"&DueDateTo="+$("#txtFilterDueDateTo").val()+"&AssignedByDelimited="+objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedBy").value+"&AssignedToDelimited="+objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedTo").value,t=function(t){t.IsSuccess==!0?(window.location=DownloadExportListURL+n,$("#divModal").modal("hide")):ModalAlert(MODAL_HEADER,t.Result)};objEMSCommonJS.GetAjax(GetCheckExportListURL+n,{},"#btnExport",t,null,!0)},LoadJQGrid:function(n){var r=this,t,i;Loading(!0);t=localStorage.getItem("tblChecklistList")==""?"":$.parseJSON(localStorage.getItem("tblChecklistList"));i=function(){var n=$("#divCheckList .jqgfirstrow").height();$("#divCheckList .jqgfirstrow td .filterFields").each(function(){$(this).appendTo("#divCheckList #filterFieldsContainer")});$("#divCheckList .jqgfirstrow").css({height:n+"px"});$("#divCheckList div.filterFields").unbind("keyup");$("#divCheckList div.filterFields").keyup(function(n){n.keyCode=="13"&&$("#btnSearch").click()})};i();$("#tblChecklistList").jqGrid("GridUnload");$("#tblChecklistList").jqGrid("GridDestroy");$("#tblChecklistList").jqGrid({url:ChecklistListURL,postData:n,sortname:t==null?"":t.sortname,sortorder:t==null?"":t.sortorder,selrow:t==null?"":t.selrow,pageNumber:t==null?1:t.page,rowNum:t==null?10:t.rowNum,datatype:"json",mtype:"GET",colNames:["ID","Type","Sub-Type","Title","Description","Assigned By","Assigned To","Due Date","Current Status","Timestamp","Remarks","",""],colModel:[{key:!0,name:"ID",index:"ID",align:"center",sortable:!1,formatter:objChecklistListJS.UpdateLink},{name:"Type",index:"Type",align:"left",sortable:!1},{hidden:!0,name:"SubType",index:"SubType",align:"left",sortable:!1},{name:"Title",index:"Title",align:"left",sortable:!1},{hidden:!0,name:"Description",index:"Description",align:"left",sortable:!1},{name:"AssignedBy",index:"AssignedBy",align:"left",sortable:!1},{name:"AssignedTo",index:"AssignedTo",align:"left",sortable:!1},{name:"DueDate",index:"DueDate",align:"left",sortable:!1},{name:"CurrentStatus",index:"CurrentStatus",align:"left",sortable:!1},{name:"CurrentTimestamp",index:"CurrentTimestamp",align:"left",sortable:!1},{hidden:!0,name:"Remarks",index:"Remarks",align:"left",sortable:!1},{hidden:!0,name:"ApplicantID",index:"ApplicantID",align:"left",sortable:!1},{hidden:!0,name:"EmployeeID",index:"EmployeeID",align:"left",sortable:!1},],toppager:$("#divPager"),rowList:SetRowList(),loadonce:!1,viewrecords:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1},emptyrecords:"No records to display",multiselect:!1,rowNumbers:!0,width:"100%",height:"100%",sortable:!0,ondblClickRow:function(n,t){$("#tblChecklistList tr:nth-child("+(t+1)+") .jqgrid-id-link").click()},loadComplete:function(n){if(Loading(!1),n.IsSuccess!=undefined&&(n.IsSuccess||($("#divErrorMessage").html(""),ModalAlert(MODAL_HEADER,n.Result))),n.rows!=null){if(n.rows.length>0)for(var t=0;t<n.rows.length;t++);AutoSizeColumnJQGrid("tblChecklistList",n);$("#divCheckList #filterFieldsContainer .filterFields").each(function(n){$(this).appendTo(".jqgfirstrow td:nth-child("+(n+2)+")")});$("#divCheckList #tblChecklistList .jqgrid-id-link").click(function(){$("#divLogActivityModal").modal("show")})}localStorage.ChecklistListFilterOption!=undefined&&$("#chkFilter").prop("checked",JSON.parse(localStorage.ChecklistListFilterOption));objChecklistListJS.ShowHideFilter();$("#chkFilter").on("change",function(){objChecklistListJS.ShowHideFilter();localStorage.ChecklistListFilterOption=$("#chkFilter").is(":checked")});$(".ui-jqgrid-bdiv").css({"min-height":"400px"});$("table tr.jqgfirstrow td").each(function(n){var t=n+1;$("table .jqgfirstrow td:nth-child("+t+")").find("input[type='search']").length&&$("table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("table .jqgfirstrow td:nth-child("+t+")").find("input[type='number']").length&&$("table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("table .jqgfirstrow td:nth-child("+t+")").find("div.multiselect-control").length&&$("table .jqgfirstrow td:nth-child("+t+") div.multiselect-control").text()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'))})},loadError:function(n){ModalAlert(MODAL_HEADER,n.responseText);Loading(!1)},beforeRequest:function(){GetJQGridState("tblChecklistList");i()}}).navGrid("#divPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});jQuery(".ui-pg-selbox").closest("select").before('<label class="ui-row-label">Show<\/label>');jQuery(".ui-row-label").closest("label").before('<label class="ui-row-label" id="lblFilter">Show Filter<\/label>');jQuery("#lblFilter").after('<input type="checkbox" id="chkFilter" style="margin-right:15px; margin-top: 5px;"><\/div>')},SetLocalStorage:function(){localStorage.ChecklistListType=objEMSCommonJS.GetMultiSelectList("multiSelectedType").value;localStorage.ChecklistListTypeText=objEMSCommonJS.GetMultiSelectList("multiSelectedType").text;localStorage.ChecklistListTitle=$("#txtFilterTitle").val();localStorage.ChecklistListCurrentStatus=objEMSCommonJS.GetMultiSelectList("multiSelectedCurrentStatus").value;localStorage.ChecklistListCurrentStatusText=objEMSCommonJS.GetMultiSelectList("multiSelectedCurrentStatus").text;localStorage.ChecklistListCurrentTimestampFrom=$("#txtFilterCurrentTimestampFrom").val();localStorage.ChecklistListCurrentTimestampTo=$("#txtFilterCurrentTimestampTo").val();localStorage.ChecklistListDueDateFrom=$("#txtFilterDueDateFrom").val();localStorage.ChecklistListDueDateTo=$("#txtFilterDueDateTo").val();localStorage.ChecklistListAssignedBy=objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedBy").value;localStorage.ChecklistListAssignedByText=objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedBy").text;localStorage.ChecklistListAssignedTo=objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedTo").value;localStorage.ChecklistListAssignedToText=objEMSCommonJS.GetMultiSelectList("multiSelectedAssignedTo").text},GetLocalStorage:function(){objEMSCommonJS.SetMultiSelectList("multiSelectedType","ChecklistListType","ChecklistListTypeText");$("#txtFilterTitle").val(localStorage.ChecklistListTitle);objEMSCommonJS.SetMultiSelectList("multiSelectedCurrentStatus","ChecklistListCurrentStatus","ChecklistListCurrentStatusText");objEMSCommonJS.SetMultiSelectList("multiSelectedAssignedBy","ChecklistListAssignedBy","ChecklistListAssignedByText");$("#txtFilterCurrentTimestampFrom").val(localStorage.ChecklistListCurrentTimestampFrom);$("#txtFilterCurrentTimestampTo").val(localStorage.ChecklistListCurrentTimestampTo);$("#txtFilterDueDateFrom").val(localStorage.ChecklistListDueDateFrom);$("#txtFilterDueDateTo").val(localStorage.ChecklistListDueDateTo);objEMSCommonJS.SetMultiSelectList("multiSelectedAssignedTo","ChecklistListAssignedTo","ChecklistListAssignedToText")},UpdateLink:function(n,t,i){return"<a href=\"\" class='activity-id-link' onclick=\"return objChecklistListJS.ViewUpdateStatusModal('"+UpdateLogActivityURL+"?ID="+i.ID+"&ApplicantID="+i.ApplicantID+"&EmployeeID="+i.EmployeeID+"');\">"+objEMSCommonJS.JQGridIDFormat(i.ID)+"<\/a>"},ViewUpdateStatusModal:function(n){return $("#divLogActivityModal").modal("show"),LoadPartial(n,"divLogActivityBodyModal"),!1},ShowHideFilter:function(){$("#chkFilter").is(":checked")?$(".jqgfirstrow .filterFields").show():$("#chkFilter").is(":not(:checked)")&&$(".jqgfirstrow .filterFields").hide()}};objChecklistListJS.Initialize()});