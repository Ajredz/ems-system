var objOrgGroupListJS,PositionWithLevelAutoCompleteURL,ParentOrgGroupAutoCompleteURL;const OrgGroupListURL=window.location.pathname+"?handler=List",OrgTypeAutoCompleteURL=window.location.pathname+"?handler=OrgTypeAutoComplete",OrgGroupAddURL=window.location.pathname.replace("/list","")+"/Add",OrgGroupViewURL=window.location.pathname.replace("/list","")+"/View",GetOrgGroupChildrenURL=window.location.pathname.replace("/list","")+"/View?handler=ChildrenOrgDropDown",GetOrgGroupPositionURL=window.location.pathname.replace("/list","")+"/View?handler=OrgGroupPosition",GetOrgGroupNPRFURL=window.location.pathname.replace("/list","")+"/View?handler=OrgGroupNPRF",OrgGroupEditURL=window.location.pathname.replace("/list","")+"/Edit",OrgGroupDeleteURL=window.location.pathname.replace("/list","")+"/Delete",OrgGroupAddPostURL=window.location.pathname.replace("/list","")+"/Add",OrgGroupEditPostURL=window.location.pathname.replace("/list","")+"/Edit",OrgGroupEditDetailsURL=window.location.pathname.replace("/list","")+"/EditDetails",PositionAddURL="/Plantilla/Position/Add",PositionAddPostURL="/Plantilla/Position/Add",ViewPositionByIDURL=window.location.pathname.replace("/list","")+"/View?handler=PositionDropDownByID",ViewOrgGroupDropDownURL=window.location.pathname.replace("/list","")+"/View?handler=OrgGroupDropDown",ViewPositionLevelDropDownURL=window.location.pathname.replace("/list","")+"/View?handler=PositionLevelDropDown",PositionDropDownURL=window.location.pathname.replace("/list","")+"/View?handler=PositionDropDown",EditPositionByIDURL=window.location.pathname.replace("/list","")+"/View?handler=PositionDropDownByID",GetOrgTypeURL=window.location.pathname+"?handler=ReferenceValue&RefCode=ORGGROUPTYPE",GetOrgGroupTagsByOrgGroupTypeURL=window.location.pathname+"?handler=OrgGroupTagsByOrgGroupType&RefCode=",DownloadOrgGroupFormURL=window.location.pathname+"?handler=DownloadTemplate&ID=1",UploadInsertOrgGroupURL=window.location.pathname.replace("/list","")+"/UploadInsert?handler=UploadInsertOrgGroup",UploadEditOrgGroupURL=window.location.pathname.replace("/list","")+"/UploadEdit?handler=UploadEditOrgGroup",GetCheckOrgGroupExportListURL=window.location.pathname+"?handler=CheckOrgGroupExportList",DownloadOrgGroupExportListURL=window.location.pathname+"?handler=DownloadOrgGroupExportList",OrgTypeHierarchyUpwardURL=window.location.pathname+"?handler=OrgGroupHierarchy",OrgTypeEmployeeListURL=window.location.pathname.replace("/list","")+"/View?handler=OrgGroupEmployeeList",PositionAutoCompleteURL=window.location.pathname.replace("/list","")+"/View?handler=PositionAutoComplete",OrgGroupNPRFListURL=window.location.pathname.replace("/list","")+"/View?handler=OrgGroupNPRFList",OrgGroupPlantillaCountUpdateURL=window.location.pathname.replace("/list","")+"/UpdatePlantilla";PositionWithLevelAutoCompleteURL=window.location.pathname+"?handler=PositionWithLevelByAutoComplete";ParentOrgGroupAutoCompleteURL=window.location.pathname+"?handler=OrgGroupAutoComplete";$(document).ready(function(){objOrgGroupListJS={Initialize:function(){var n,t;$("#divUploadModal").css("width","50%");$("#divUploadModal .modal-header").mousedown(handle_mousedown);n=this;n.ElementBinding();t={ID:localStorage.PlantillaOrgGroupListID,Code:localStorage.PlantillaOrgGroupListCode,Description:localStorage.PlantillaOrgGroupListDescription,OrgTypeDelimited:localStorage.PlantillaOrgGroupListOrgTypeDelimited,ParentOrgDescription:localStorage.PlantillaOrgGroupListParentOrg};n.LoadJQGrid(t);n.GetLocalStorage()},ElementBinding:function(){var n=this;NumberOnly($("#txtFilterOrgGroupID"));$("#divOrgGroupTableList #btnSearch").click(function(){var t={ID:$("#txtFilterOrgGroupID").val(),Code:$("#txtFilterCode").val(),Description:$("#txtFilterDescription").val(),OrgTypeDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedOrgType").value,ParentOrgDescription:$("#txtFilterParentOrg").val()};n.SetLocalStorage();ResetJQGridState("tblPlantillaOrgGroupList");n.LoadJQGrid(t)});$("#divOrgGroupTableList #btnReset").click(function(){$("div.filterFields input[type='search']").val("");$("div.filterFields select").val("");$("div.filterFields input[type='checkbox']").prop("checked",!0);$("#multiSelectedOrgType").html("");$("#multiSelectedOrgTypeOption label, #multiSelectedOrgTypeOption input").prop("title","add");$("#divOrgGroupTableList #btnSearch").click()});objEMSCommonJS.BindFilterMultiSelectEnum("multiSelectedOrgType",GetOrgTypeURL);$("#btnAdd").click(function(){LoadPartial(OrgGroupAddURL,"divOrgGroupBodyModal");$("#divOrgGroupModal").modal("show")});$("#btnUploadInsert").click(function(){objEMSCommonJS.UploadModal(UploadInsertOrgGroupURL,"Upload (Insert) Org Group",DownloadOrgGroupFormURL);$("#divModalErrorMessage").html("")});$("#btnUploadEdit").click(function(){objEMSCommonJS.UploadModal(UploadEditOrgGroupURL,"Upload (Edit) Org Group","");$("#divModalErrorMessage").html("")});$("#btnExport").click(function(){ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objOrgGroupListJS.ExportFunction()","function")})},ExportFunction:function(){var n="&sidx="+$("#tblPlantillaOrgGroupList").jqGrid("getGridParam","sortname")+"&sord="+$("#tblPlantillaOrgGroupList").jqGrid("getGridParam","sortorder")+"&ID="+$("#txtFilterOrgGroupID").val()+"&Code="+$("#txtFilterCode").val()+"&Description="+$("#txtFilterDescription").val()+"&OrgTypeDelimited="+objEMSCommonJS.GetMultiSelectList("multiSelectedOrgType").value+"&ParentOrgDescription="+$("#txtFilterParentOrg").val(),t=function(t){t.IsSuccess==!0?(Loading(!0),window.location=DownloadOrgGroupExportListURL+n,$("#divModal").modal("hide"),Loading(!1)):ModalAlert(MODAL_HEADER,t.Result)};objEMSCommonJS.GetAjax(GetCheckOrgGroupExportListURL+n,{},"#btnExport",t,null,!0)},LoadJQGrid:function(n){var r=this,t,i;Loading(!0);t=localStorage.getItem("tblPlantillaOrgGroupList")==""?"":$.parseJSON(localStorage.getItem("tblPlantillaOrgGroupList"));i=function(){var n=$("#divOrgGroupTableList .jqgfirstrow").height();$("#divOrgGroupTableList .jqgfirstrow td .filterFields").each(function(){$(this).appendTo("#filterFieldsContainer")});$("#divOrgGroupTableList .jqgfirstrow").css({height:n+"px"});$("div.filterFields").unbind("keyup");$("div.filterFields").keyup(function(n){n.keyCode=="13"&&$("#divOrgGroupTableList #btnSearch").click()})};i();$("#tblPlantillaOrgGroupList").jqGrid("GridUnload");$("#tblPlantillaOrgGroupList").jqGrid("GridDestroy");$("#tblPlantillaOrgGroupList").jqGrid({url:OrgGroupListURL,postData:n,sortname:t==null?"":t.sortname,sortorder:t==null?"":t.sortorder,selrow:t==null?"":t.selrow,pageNumber:t==null?1:t.page,rowNum:t==null?10:t.rowNum,datatype:"json",mtype:"GET",colNames:["","ID","Plantilla","Code","Description","Organizational Type","Parent Organization"],colModel:[{hidden:!0},{width:15,key:!0,name:"ID",index:"ID",align:"center",sortable:!0,formatter:objOrgGroupListJS.AddLink},{name:"",index:"",width:40,align:"center",sortable:!0,formatter:objOrgGroupListJS.UpdatePlantillaLink},{name:"Code",index:"Code",editable:!0,align:"left",sortable:!0},{name:"Description",index:"Description",editable:!0,align:"left"},{name:"OrgTypeDescription",index:"OrgTypeDescription",editable:!0,align:"left"},{name:"ParentOrgDescription",index:"ParentOrgDescription",editable:!0,align:"left"},],toppager:$("#divPager"),rowList:SetRowList(),loadonce:!1,viewrecords:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1},emptyrecords:"No records to display",multiselect:!1,rowNumbers:!0,width:"100%",height:"100%",sortable:!0,ondblClickRow:function(n,t){$("#tblPlantillaOrgGroupList tr:nth-child("+(t+1)+") .jqgrid-id-link").click()},loadComplete:function(n){if(Loading(!1),n.IsSuccess!=undefined&&(n.IsSuccess||($("#divErrorMessage").html(""),ModalAlert(MODAL_HEADER,n.Result))),n.rows!=null){if(n.rows.length>0)for(var t=0;t<n.rows.length;t++);AutoSizeColumnJQGrid("tblPlantillaOrgGroupList",n);$("#filterFieldsContainer .filterFields").each(function(n){$(this).appendTo("#divOrgGroupTableList .jqgfirstrow td:nth-child("+(n+2)+")")});$("#tblPlantillaOrgGroupList .jqgrid-id-link").click(function(){$("#divOrgGroupModal").modal("show")})}localStorage.OrgGroupListFilterOption!=undefined&&$("#chkFilter").prop("checked",JSON.parse(localStorage.OrgGroupListFilterOption));objOrgGroupListJS.ShowHideFilter();$("#chkFilter").on("change",function(){objOrgGroupListJS.ShowHideFilter();localStorage.OrgGroupListFilterOption=$("#chkFilter").is(":checked")});$(".ui-jqgrid-bdiv").css({"min-height":"400px"});$("table tr.jqgfirstrow td").each(function(n){var t=n+1;$("table .jqgfirstrow td:nth-child("+t+")").find("input[type='search']").length&&$("table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("table .jqgfirstrow td:nth-child("+t+")").find("input[type='number']").length&&$("table .jqgfirstrow td:nth-child("+t+") input").val()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'));$("table .jqgfirstrow td:nth-child("+t+")").find("div.multiselect-control").length&&$("table .jqgfirstrow td:nth-child("+t+") div.multiselect-control").text()!=""&&($(".ui-jqgrid-htable tr th:nth-child("+t+")").addClass("filtered"),$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").find("span.glyphicon-table-header").length==0&&$(".ui-jqgrid-htable tr th:nth-child("+t+").filtered div").prepend('<span class="glyphicon glyphicon-filter glyphicon-table-header"><\/span>'))})},loadError:function(n){ModalAlert(MODAL_HEADER,n.responseText);Loading(!1)},beforeRequest:function(){GetJQGridState("tblPlantillaOrgGroupList");i()}}).navGrid("#divPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});jQuery(".ui-pg-selbox").closest("select").before('<label class="ui-row-label">Show<\/label>');jQuery(".ui-row-label").closest("label").before('<label class="ui-row-label" id="lblFilter">Show Filter<\/label>');jQuery("#lblFilter").after('<input type="checkbox" id="chkFilter" style="margin-right:15px; margin-top: 5px;"><\/div>')},SetLocalStorage:function(){localStorage.PlantillaOrgGroupListID=$("#txtFilterOrgGroupID").val();localStorage.PlantillaOrgGroupListCode=$("#txtFilterCode").val();localStorage.PlantillaOrgGroupListDescription=$("#txtFilterDescription").val();localStorage.PlantillaOrgGroupListParentOrg=$("#txtFilterParentOrg").val();localStorage.PlantillaOrgGroupListOrgTypeDelimited=objEMSCommonJS.GetMultiSelectList("multiSelectedOrgType").value;localStorage.PlantillaOrgGroupListOrgTypeDelimitedText=objEMSCommonJS.GetMultiSelectList("multiSelectedOrgType").text},GetLocalStorage:function(){$("#txtFilterOrgGroupID").val(localStorage.PlantillaOrgGroupListID);$("#txtFilterCode").val(localStorage.PlantillaOrgGroupListCode);$("#txtFilterDescription").val(localStorage.PlantillaOrgGroupListDescription);$("#txtFilterParentOrg").val(localStorage.PlantillaOrgGroupListParentOrg);objEMSCommonJS.SetMultiSelectList("multiSelectedOrgType","PlantillaOrgGroupListOrgTypeDelimited","PlantillaOrgGroupListOrgTypeDelimitedText")},AddLink:function(n,t,i){return"<a href=\"\" class='jqgrid-id-link' onclick=\"return LoadPartial('"+OrgGroupViewURL+"?ID="+i.ID+"', 'divOrgGroupBodyModal');\">"+objEMSCommonJS.JQGridIDFormat(i.ID)+"<\/a>"},CalculateTotal:function(n,t){for(var u=0,r=$("."+n),i=0;i<r.length;i++)parseInt(r[i].value)&&(u+=parseInt(r[i].value||0));$("#"+t).text(u)},UpdatePlantillaLink:function(n,t,i){return"<a href=\"\" class='jqgrid-update-plantilla-link' onclick=\"return objOrgGroupListJS.UpdatePlantillaClick('"+OrgGroupPlantillaCountUpdateURL+"',"+i.ID+",'"+(i.Code+" - "+i.Description)+'\'); "><span class="btn-glyph-dynamic"><span class="glyphicon glyphicon-user"><\/span><\/span><\/a>'},UpdatePlantillaClick:function(n,t,i){var r=function(n){setTimeout(function(){$("#divUpdatePlantillaModal #lblOrgGroupDescription").text(n)},300)};return $("#divUpdatePlantillaModal").modal("show"),LoadPartialSuccessFunction(n+"?OrgGroupID="+t,"divUpdatePlantillaBodyModal",r(i)),!1},ShowHideFilter:function(){$("#chkFilter").is(":checked")?$(".jqgfirstrow .filterFields").show():$("#chkFilter").is(":not(:checked)")&&$(".jqgfirstrow .filterFields").hide()}};objOrgGroupListJS.Initialize()});