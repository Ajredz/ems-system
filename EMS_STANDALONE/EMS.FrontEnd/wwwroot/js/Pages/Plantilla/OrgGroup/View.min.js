var objOrgGroupViewJS,PositionLevelDropDownOptions=[],PositionDropDownOptions=[],ParentOrgGroupAutoCompleteURL=window.location.pathname+"?handler=OrgGroupAutoComplete",CheckFileIfExistsURL=window.location.pathname+"?handler=CheckFileIfExists",DownloadFileURL=window.location.pathname+"?handler=DownloadFile";$(document).ready(function(){objOrgGroupViewJS={ID:$("#hdnID").val(),Initialize:function(){$("#divOrgGroupBodyModal .modal-header").mousedown(handle_mousedown);var n=this;n.ElementBinding();$(".reqField").addClass("unreqField");$(".reqField").removeClass("reqField");$(".required-field").removeClass("required-field");$("#lnkCreateRegion, #lnkCreatePosition, #btnAddChildrenManPowerFields, #btnAddNPRFFields").hide();$(".DivDeleteChildrenOrgGroup").attr("style","display: none !important");$('#divOrgGroupModal input[type="checkbox"], #divOrgGroupModal select').prop("disabled",!0);n.LoadChildrenOrgGroup();n.GetPositionLevelDropDownOptions();n.GetPositionDropDownOptions();n.LoadOrgGroupPosition();n.LoadHierarchyUpward();n.LoadOrgGroupNPRF();objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabOrgGroupPosition");$("#divOrgGroupTags").children().length==0&&$(".tablinks:nth-child(3)").hide()},DeleteSuccessFunction:function(){$("#divOrgGroupTableList #btnSearch").click();$("#divOrgGroupModal").modal("hide")},ElementBinding:function(){var n=this;$("#btnDelete").click(function(){ModalConfirmation(MODAL_HEADER,MSG_CONFIRM_DELETE_SINGLE,"objEMSCommonJS.PostAjax(false                     , OrgGroupDeleteURL + '?ID=' + objOrgGroupViewJS.ID                    , {}                     , '#divOrgGroupErrorMessage'                     , '#btnDelete'                     , objOrgGroupViewJS.DeleteSuccessFunction);","function")});$("#btnEdit").click(function(){LoadPartial(OrgGroupEditURL+"?ID="+objOrgGroupViewJS.ID,"divOrgGroupBodyModal")});$("#btnEditDetails").click(function(){LoadPartial(OrgGroupEditDetailsURL+"?ID="+objOrgGroupViewJS.ID,"divOrgGroupBodyModal")});$("#txtSearchBoxOne").on("change keyup keydown",function(){ListBoxSearch("ddlListOneOrgGroup",$(this).val(),!1)})},AddChildrenManPowerDynamicFields:function(){var t=$(".ChildrenManPowerDynamicFields:last").prop("id"),n=parseInt(t==undefined?0:t.replace("ChildrenManPowerDynamicFields_",""))+1,i=$("#ddlPosition_"+n).val();$("#DivChildrenManPowerDynamicFields").append('<div class="form-group form-fields ChildrenManPowerDynamicFields" id="ChildrenManPowerDynamicFields_'+n+'">                   <div class="col-md-0-75 text-align-center no-padding">                        <input type="checkbox" id="chkIsHead_'+n+'" class="IsHeadDynamicFields" title="Head" readonly>                    <\/div>                    <div class="col-md-3 text-align-center no-padding">                        <input type ="search" placeholder="Search.." id="txtPosition_'+n+'" class="form-control PositionTextDynamicFields" title="Position" maxlength="100">                        <input type="hidden" id="hdnPositionID_'+n+'" class="form-control PositionDynamicFields">                    <\/div>                    <div class="col-md-3 text-align-center no-padding">                        <input type ="search" placeholder="Search.." id="txtReportingPosition_'+n+'" class="form-control ReportingPositionTextDynamicFields" title="Reporting Position" maxlength="100">                        <input type="hidden" id="hdnReportingPositionID_'+n+'" class="form-control ReportingPositionDynamicFields">                    <\/div>                    <div class="col-md-0-75 text-align-center no-padding">                        <input type="text" id="txtPlanned_'+n+'" class="form-control text-amount PlannedDynamicFields" title="Planned">                    <\/div>                    <div class="col-md-0-75 text-align-center no-padding">                        <input type="text" id="txtActive_'+n+'" class="form-control text-amount ActiveDynamicFields" title="Active" readonly>                    <\/div>                    <div class="col-md-0-75 text-align-center no-padding">                        <input type="text" id="txtInactive_'+n+'" class="form-control text-amount InactiveDynamicFields" title="Inactive" readonly>                    <\/div>                    <div class="col-md-0-75 text-align-right no-padding">                        <label id="txtVariance_'+n+'" class="control-label block-label remarks-label text-amount total-label VarianceDynamicFields"><\/label>                    <\/div>                <\/div>');$('#divOrgGroupModal input[type="checkbox"], select').prop("disabled",!0)},LoadChildrenOrgGroup:function(){$(".listboxbutton, #txtSearchBoxTwo, #ddlListTwoOrgGroup").hide();var n={ID:objOrgGroupViewJS.ID},t=function(n){$(n.Result).each(function(n,t){$("#ddlListOneOrgGroup").append($("<option/>",{value:t.Value,text:t.Text}))})};objEMSCommonJS.GetAjax(GetOrgGroupChildrenURL,n,"",t)},GetPositionLevelDropDownOptions:function(){var t=this,n=function(n){$(n.Result).each(function(n,t){PositionLevelDropDownOptions.push({Value:t.Value,Text:t.Text})})};objEMSCommonJS.GetAjax(ViewPositionLevelDropDownURL,{},"",n)},GetPositionDropDownOptions:function(){var t=this,n=function(n){$(n.Result).each(function(n,t){PositionDropDownOptions.push({Value:t.Value,Text:t.Text})})};objEMSCommonJS.GetAjax(ViewPositionByIDURL,{},"",n)},LoadOrgGroupPosition:function(){var i=this,n,t;$("#DivChildrenManPowerDynamicFields").html("");n={ID:objOrgGroupViewJS.ID};t=function(n){var r=function(n,r){i.AddChildrenManPowerDynamicFields();$("#txtPlanned_"+r).val(n.PlannedCount);$("#txtActive_"+r).val(n.ActiveCount);$("#txtVariance_"+r).val(parseInt(n.ActiveCount)+parseInt(n.InactiveCount)-parseInt(n.PlannedCount));$("#txtVariance_"+t).text(parseInt(n.ActiveCount)+parseInt(n.InactiveCount)-parseInt(n.PlannedCount));$("#txtInactive_"+r).val(n.InactiveCount);$("#txtPosition_"+r).val(n.PositionDescription);$("#hdnPositionID_"+r).val(n.PositionID);$("#txtReportingPosition_"+r).val(n.ReportingPositionDescription);$("#hdnReportingPositionID_"+r).val(n.ReportingPositionID);$("#chkIsHead_"+r).attr("checked",n.IsHead);$("#txtPlanned_"+r).attr("readonly",!0);$("#txtActive_"+r).attr("readonly",!0);$("#txtInactive_"+r).attr("readonly",!0);$("#chkIsHead_"+r).attr("readonly",!0);$("#txtPosition_"+r).attr("readonly",!0);$("#txtReportingPosition_"+r).attr("readonly",!0);objOrgGroupListJS.CalculateTotal("PlannedDynamicFields","txtTotalPlanned");objOrgGroupListJS.CalculateTotal("ActiveDynamicFields","txtTotalActive");objOrgGroupListJS.CalculateTotal("InactiveDynamicFields","txtTotalInactive");objOrgGroupListJS.CalculateTotal("VarianceDynamicFields","txtTotalVariance")},t=1;$(n.Result).each(function(n,i){r(i,t);t++})};objEMSCommonJS.GetAjax(GetOrgGroupPositionURL,n,"",t)},LoadHierarchyUpward:function(){var n=function(n){var r=n.Result.length,t=$("#txtCode").val(),i=$("#txtDescription").val();$("#divHierarchyUpward").html("");$(n.Result).each(function(n,t){$("#divHierarchyUpward").append(t.Code+" - "+t.Description+" > ")});t!=""&&$("#divHierarchyUpward").append(t+" - "+i)};objEMSCommonJS.GetAjax(OrgTypeHierarchyUpwardURL+"&ID="+$("#hdnParentOrgID").val(),{},"",n)},LoadOrgGroupNPRF:function(){var i=this,n,t;$("#DivNPRFDynamicFields").html("");n={OrgGroupID:objOrgGroupViewJS.ID};t=function(n){var i=function(n,t){$("#DivNPRFDynamicFields").append('<div class="form-group form-fields NPRFDynamicFields" id="NPRFDynamicFields_'+t+'">                            <div class="col-md-2-5 text-align-center no-padding">                                <input type="text" id="txtNPRFNumber_'+t+'" value="'+n.NPRFNumber+'" class="form-control" title="NPRFNumber" readonly>                            <\/div>                            <div class="col-md-3 no-padding">                                <label class="control-label block-label">'+n.SourceFile+'<\/label>                                <input type="hidden" id="txtServerFile_ '+t+'" value="'+n.ServerFile+'" class="form-control">                                <input type="hidden" id="txtSourceFile_ '+t+'" value="'+n.SourceFile+'" class="form-control">                            <\/div>                            <div class="col-md-2-5 no-padding">                                <label class="control-label block-label">'+n.UploadedBy+"<br> Timestamp: "+n.Timestamp+'<\/label>                            <\/div>                            <div class="col-md-0-5 no-padding">                                <span class="btn-glyph-dynamic glyphicon glyphicon-download-alt" onclick="objEMSCommonJS.DownloadAttachment(CheckFileIfExistsURL, \'PlantillaService_OrgGroup_Attachment_Path\',\''+n.ServerFile+"', '"+n.SourceFile+"')\"><\/span>                            <\/div>                          <\/div>")},t=1;$(n.Result).each(function(n,r){i(r,t);t++})};objEMSCommonJS.GetAjax(GetOrgGroupNPRFURL,n,"",t)}};objOrgGroupViewJS.Initialize()});