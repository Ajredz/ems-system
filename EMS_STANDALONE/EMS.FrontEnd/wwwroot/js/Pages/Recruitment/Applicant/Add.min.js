var objApplicantAddJS,AttachmentTypeDropDownOptions=[];$(document).ready(function(){objApplicantAddJS={Initialize:function(){var n=this;n.ElementBinding();$("#divApplicantModal #btnSave").show();$("#divApplicantModal .form-control").attr("readonly",!1);$("#divApplicantModal #btnDelete, #divApplicantModal #btnBack").remove();$("#txtExpectedSalary").val("");$(".downloadColumn").remove();$(".tablinks:nth-child(4)").remove();$(".tablinks:nth-child(3)").remove();n.GetAttachmentTypeDropDownOptions();n.AddAttachmentDynamicFields();objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabPersonalInformation");$(".timestampColumn").remove()},ElementBinding:function(){var n=this;AmountTextChange($("#divApplicantModal #txtExpectedSalary"));AmountOnly($("#divApplicantModal #txtExpectedSalary"));NumberOnly($("#divApplicantModal #txtCellphoneNumber"));$("#dpBirthDate").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});$("#dpDateApplied").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});$("#btnAddAttachmentFields").click(function(){var i=$("#DivUploadAttachmentDynamicFields .required-field"),t=!0;i.each(function(){if($(this).val()=="")return $(this).focus(),t=!1,!1});t&&n.AddAttachmentDynamicFields()});$("#ddlPSGCRegion").change(function(){$("#ddlPSGCRegion").val()!=""&&(GenerateDropdownValues(GetCityDropDownByRegionURL+"&RegionID="+$("#ddlPSGCRegion").val(),"ddlPSGCCity","Value","Text","","",!1),$("input[name='Applicant.PersonalInformation.PSGCRegion']").val($("#ddlPSGCRegion").val()))});$("#ddlPSGCCity").change(function(){$("#ddlPSGCCity").val()!=""&&$("input[name='Applicant.PersonalInformation.PSGCCity']").val($("#ddlPSGCCity").val())});$("#txtEmail").on("keyup",function(){return $("#divApplicantErrorMessage").html(""),ValidEmail($("#txtEmail"))||($("#txtEmail").addClass("errMessage"),$("#txtEmail").focus(),$("#divApplicantErrorMessage").append('<label class="errMessage"><li>Email Address is invalid<\/li><\/label><br />')),!1});$("#txtCellphoneNumber").on("keyup",function(){return $("#divApplicantErrorMessage").html(""),validMobileNo($("#txtCellphoneNumber"))||($("#txtCellphoneNumber").addClass("errMessage"),$("#txtCellphoneNumber").focus(),$("#divApplicantErrorMessage").append('<label class="errMessage"><li>Cellphone Number is invalid<\/li><\/label><br />')),!1});$("#btnAddApplicationSource").click(function(){var n=function(){$("#divReferenceModal .close").click(function(){GenerateDropdownValues(GetApplicationSourceURL,"ddlApplicationSource","Value","Description","","",!1)})};LoadPartialSuccessFunction(AddReferenceURL,"divReferenceBodyModal",n);$("#divReferenceModal #hdnReferenceCode").val("APPLICATION_SOURCE");$("#divReferenceModal #hdnReferenceField").val("btnAddApplicationSource");$("#divReferenceModal").modal("show")});$("#lnkType").click(function(){var n=function(){$("#divReferenceModal .close").click(function(){var n=$(".AttachmentDynamicFields:last").prop("id"),t=parseInt(n==undefined?0:n.replace("AttachmentDynamicFields_",""));GenerateDropdownValues(AttachmentTypeDropDown,"ddlType_"+t,"Value","Description","","",!1)})};LoadPartialSuccessFunction(AddReferenceURL,"divReferenceBodyModal",n);$("#divReferenceModal #hdnReferenceCode").val("ATTACHMENT_TYPE");$("#divReferenceModal #hdnReferenceField").val("lnkType");$("#divReferenceModal").modal("show")});$("#btnAddCourse").click(function(){var n=function(){$("#divReferenceModal .close").click(function(){GenerateDropdownValues(CourseDropDown,"ddlCourse","Value","Description","","",!1)})};LoadPartialSuccessFunction(AddReferenceURL,"divReferenceBodyModal",n);$("#divReferenceModal #hdnReferenceCode").val("COURSE");$("#divReferenceModal #hdnReferenceField").val("btnAddCourse");$("#divReferenceModal").modal("show")});$("#divApplicantModal #btnSave").click(function(){var n=function(){return ValidEmail($("#txtEmail"))?validMobileNo($("#txtCellphoneNumber"))?$(".AttachmentDynamicFields").length<=0?(objEMSCommonJS.ChangeTab($(".tablinks:nth-child(2)"),"tabAttachment"),$("#divApplicantErrorMessage").append('<label class="errMessage"><li>Attachment'+SUFF_REQUIRED+"<\/li><\/label><br />"),!1):!0:($("#txtCellphoneNumber").addClass("errMessage"),$("#txtCellphoneNumber").focus(),$("#divApplicantErrorMessage").append('<label class="errMessage"><li>Cellphone Number is invalid<\/li><\/label><br />'),!1):($("#txtEmail").addClass("errMessage"),$("#txtEmail").focus(),$("#divApplicantErrorMessage").append('<label class="errMessage"><li>Email Address is invalid<\/li><\/label><br />'),!1)};objEMSCommonJS.ValidateBlankFields("#frmApplicant","#divApplicantErrorMessage",n)?ModalConfirmation(MODAL_HEADER,MSG_CONFIRM,"objEMSCommonJS.PostAjax(true                         , ApplicantAddPostURL                         ,  objApplicantAddJS.GetFormData()                         , '#divApplicantErrorMessage'                         , '#divApplicantModal #btnSave'                         , objApplicantAddJS.AddSuccessFunction); ","function"):$("#tabPersonalInformation .errMessage").length>0&&$("#tabPersonalInformation .errMessage").length==$("#divApplicantModal .errMessage").length-$("#divApplicantErrorMessage .errMessage").length?objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabPersonalInformation"):$("#tabAttachment .errMessage").length>0&&$("#tabAttachment .errMessage").length==$("#divApplicantModal .errMessage").length-$("#divApplicantErrorMessage .errMessage").length&&objEMSCommonJS.ChangeTab($(".tablinks:nth-child(2)"),"tabAttachment")});objEMSCommonJS.BindAutoComplete("divApplicantModal #txtReferredByUserIDDescription",RecruitmentReferredByAutoComplete,20,"divApplicantModal #hdnReferredByUserID","ID","Description")},GetFormData:function(){$(".Attachment_File").each(function(n){$(this).prop("name","Applicant.Attachments["+n+"].File")});$(".Attachment_Type").each(function(n){$(this).prop("name","Applicant.Attachments["+n+"].AttachmentType")});$(".Attachment_Remarks").each(function(n){$(this).prop("name","Applicant.Attachments["+n+"].Remarks")});var n=new FormData($("#frmApplicant").get(0));return $(".Attachment_Type").each(function(t){n.append("Applicant.Attachments["+t+"].ApplicantID",$("#hdnID").val())}),n.append("Applicant.PersonalInformation.CellphoneNumber","+63"+$("#txtCellphoneNumber").val()),n},AddSuccessFunction:function(){$("#divApplicantFilter #btnSearch").click();$("#frmApplicant").trigger("reset");$("#DivUploadAttachmentDynamicFields").html("");objApplicantAddJS.AddAttachmentDynamicFields();objEMSCommonJS.ChangeTab($(".tablinks:nth-child(1)"),"tabPersonalInformation")},AddAttachmentDynamicFields:function(){var i=this,t=$(".AttachmentDynamicFields:last").prop("id"),n=parseInt(t==undefined?0:t.replace("AttachmentDynamicFields_",""))+1;$("#DivUploadAttachmentDynamicFields").append('<div class="form-group form-fields AttachmentDynamicFields" id="AttachmentDynamicFields_'+n+'">    <div class="col-md-2 no-padding">        <select id="ddlType_'+n+'" class= "form-control required-field Attachment_Type" title="Attachment Type"><\/select >    <\/div>    <div class="col-md-3-5 no-padding">        <input id="txtRemarks_'+n+'" maxlength="255" class="form-control Attachment_Remarks" title="Remarks">    <\/div>    <div class="col-md-3 no-padding">        <input type="file" id="fileAttachment_'+n+'" class="form-control required-field Attachment_File" title="Attachment" accept=".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document">    <\/div>    <div class="col-md-0-5 no-padding">        <span class="btn-glyph-dynamic glyphicon glyphicon-trash" onclick="ModalConfirmation(MODAL_HEADER, MSG_CONFIRM_DELETE_SINGLE, &quot;objApplicantListJS.RemoveDynamicFields(\'#AttachmentDynamicFields_'+n+"')&quot;, &quot;function&quot;);\"><\/span>    <\/div><\/div>");objEMSCommonJS.PopulateDropDown("#ddlType_"+n,AttachmentTypeDropDownOptions)},GetAttachmentTypeDropDownOptions:function(){var t=this,n=function(n){$(n.Result).each(function(n,t){AttachmentTypeDropDownOptions.push({Value:t.Value,Text:t.Description})})};objEMSCommonJS.GetAjax(AttachmentTypeDropDown,{},"",n)}};objApplicantAddJS.Initialize()});
