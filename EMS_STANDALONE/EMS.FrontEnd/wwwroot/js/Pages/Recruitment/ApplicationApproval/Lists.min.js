var objApplicationApprovalListJS;const ApplicationApprovalListURL="/Recruitment/ApplicationApproval?handler=List",OrgGroupAutoCompleteURL="/Recruitment/ApplicationApproval?handler=OrgTypeAutoComplete",PositionAutoCompleteURL="/Recruitment/ApplicationApproval?handler=PositionAutoComplete",GetApplicationSourceURL="/Recruitment/ApplicationApproval?handler=ReferenceValue&RefCode=APPLICATION_SOURCE",ReferredByAutoComplete="/Recruitment/ApplicationApproval?handler=ReferredBy",ApplicantViewURL="/Recruitment/ApplicationApproval/View",CheckFileIfExistsURL="/Recruitment/ApplicationApproval?handler=CheckFileIfExists",UpdateStatusURL="/Recruitment/ApplicationApproval/UpdateStatus";$(document).ready(function(){objApplicationApprovalListJS={Initialize:function(){var n=this,t;n.ElementBinding();t={ID:localStorage.ApplicationApprovalListID,ApplicantName:localStorage.ApplicationApprovalListApplicantName,ApplicantSourceDelimited:localStorage.ApplicationApprovalListApplicantSourceDelimited,PositionRemarks:localStorage.ApplicationApprovalListPositionRemarks,Course:localStorage.ApplicationApprovalListCourse,CurrentPositionTitle:localStorage.ApplicationApprovalListCurrentPositionTitle,ExpectedSalaryFrom:localStorage.ApplicationApprovalListExpectedSalaryFrom,ExpectedSalaryTo:localStorage.ApplicationApprovalListExpectedSalaryTo,DateAppliedFrom:localStorage.ApplicationApprovalListDateAppliedFrom,DateAppliedTo:localStorage.ApplicationApprovalListDateAppliedTo};n.LoadJQGrid(t);n.GetLocalStorage()},ElementBinding:function(){var n=this;$("#txtFilterDateAppliedFrom, #txtFilterDateAppliedTo").datetimepicker({useCurrent:!1,format:"MM/DD/YYYY"});NumberOnly($("#txtFilterApplicantID"));NumberOnly($("#txtFilterExpectedSalaryFrom"));NumberOnly($("#txtFilterExpectedSalaryTo"));$("#btnSearch").click(function(){var t={ID:$("#txtFilterApplicantID").val(),ApplicantName:$("#txtFilterApplicantName").val(),ApplicationSourceDelimited:objEMSCommonJS.GetMultiSelectList("multiSelectedApplicationSource").value,PositionRemarks:$("#txtFilterPositionRemarks").val(),Course:$("#txtFilterCourse").val(),CurrentPositionTitle:$("#txtFilterCurrentPositionTitle").val(),ExpectedSalaryFrom:$("#txtFilterExpectedSalaryFrom").val(),ExpectedSalaryTo:$("#txtFilterExpectedSalaryTo").val(),DateAppliedFrom:$("#txtFilterDateAppliedFrom").val(),DateAppliedTo:$("#txtFilterDateAppliedTo").val()};n.SetLocalStorage();ResetJQGridState("tblRecruitmentApplicationApprovalList");n.LoadJQGrid(t)});$("#btnReset").click(function(){$("div.filterFields input").val("");$("div.filterFields select").val("");$("div.filterFields input[type='checkbox']").prop("checked",!0);$("#multiSelectedApplicationSource").html("");$("#btnSearch").click()});objEMSCommonJS.BindFilterMultiSelectEnum("multiSelectedApplicationSource",GetApplicationSourceURL)},LoadJQGrid:function(n){var r=this,t,i;Loading(!0);t=localStorage.getItem("tblRecruitmentApplicationApprovalList")==""?"":$.parseJSON(localStorage.getItem("tblRecruitmentApplicationApprovalList"));i=function(){var n=$(".jqgfirstrow").height();$(".jqgfirstrow td .filterFields").each(function(){$(this).appendTo("#filterFieldsContainer")});$(".jqgfirstrow").css({height:n+"px"});$("div.filterFields").unbind("keyup");$("div.filterFields").keyup(function(n){n.keyCode=="13"&&$("#btnSearch").click()})};i();$("#tblRecruitmentApplicationApprovalList").jqGrid("GridUnload");$("#tblRecruitmentApplicationApprovalList").jqGrid("GridDestroy");$("#tblRecruitmentApplicationApprovalList").jqGrid({url:ApplicationApprovalListURL,postData:n,sortname:t==null?"":t.sortname,sortorder:t==null?"":t.sortorder,selrow:t==null?"":t.selrow,pageNumber:t==null?1:t.page,rowNum:t==null?10:t.rowNum,datatype:"json",mtype:"GET",colNames:["","ID","Application","Applicant Name","Date Applied","Application Source","Desired Position (Remarks)","Course","Current Position Title","Expected Salary","",""],colModel:[{hidden:!0},{width:25,key:!0,name:"ID",index:"ID",align:"center",sortable:!0,formatter:objApplicationApprovalListJS.AddLink},{width:35,name:"Application",sortable:!1,formatter:objApplicationApprovalListJS.UpdateStatusLink,align:"center"},{name:"ApplicantName",index:"ApplicantName",align:"left",sortable:!0},{name:"DateApplied",index:"DateApplied",align:"left",sortable:!0},{name:"ApplicationSource",index:"ApplicationSource",align:"left",sortable:!0},{name:"PositionRemarks",index:"PositionRemarks",align:"left",sortable:!0},{name:"Course",index:"Course",align:"left",sortable:!0},{name:"CurrentPositionTitle",index:"CurrentPositionTitle",align:"left",sortable:!0},{name:"ExpectedSalary",index:"ExpectedSalary",align:"right",sortable:!0,formatter:objApplicationApprovalListJS.FormatAmount},{name:"HasApproval",index:"HasApproval",align:"left",sortable:!1,hidden:!0},{name:"WorkflowID",index:"WorkflowID",align:"left",sortable:!1,hidden:!0},],toppager:$("#divPager"),rowList:SetRowList(),loadonce:!1,viewrecords:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1},emptyrecords:"No records to display",multiselect:!1,rowNumbers:!0,width:"100%",height:"100%",sortable:!0,loadComplete:function(n){if(Loading(!1),n.IsSuccess!=undefined&&(n.IsSuccess||($("#divErrorMessage").html(""),ModalAlert(MODAL_HEADER,n.Result))),n.rows!=null){if(n.rows.length>0)for(var t=0;t<n.rows.length;t++);AutoSizeColumnJQGrid("tblRecruitmentApplicationApprovalList",n);$("#filterFieldsContainer .filterFields").each(function(n){$(this).appendTo(".jqgfirstrow td:nth-child("+(n+2)+")")});$("#tblRecruitmentApplicationApprovalList .jqgrid-id-link").click(function(){$("#divApplicationApprovalModal").modal("show")})}localStorage.ApplicationApprovalListFilterOption!=undefined&&$("#chkFilter").prop("checked",JSON.parse(localStorage.ApplicationApprovalListFilterOption));objApplicationApprovalListJS.ShowHideFilter();$("#chkFilter").on("change",function(){objApplicationApprovalListJS.ShowHideFilter();localStorage.ApplicationApprovalListFilterOption=$("#chkFilter").is(":checked")});$(".ui-jqgrid-bdiv").css({"min-height":"400px"})},loadError:function(n){ModalAlert(MODAL_HEADER,n.responseText);Loading(!1)},beforeRequest:function(){GetJQGridState("tblRecruitmentApplicationApprovalList");i()}}).navGrid("#divPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});jQuery(".ui-pg-selbox").closest("select").before('<label class="ui-row-label">Show<\/label>');jQuery(".ui-row-label").closest("label").before('<label class="ui-row-label" id="lblFilter">Show Filter<\/label>');jQuery("#lblFilter").after('<input type="checkbox" id="chkFilter" style="margin-right:15px; margin-top: 5px;"><\/div>')},SetLocalStorage:function(){localStorage.ApplicationApprovalListID=$("#txtFilterApplicantID").val();localStorage.ApplicationApprovalListApplicantName=$("#txtFilterApplicantName").val();localStorage.ApplicationApprovalListApplicationSourceDelimited=objEMSCommonJS.GetMultiSelectList("multiSelectedApplicationSource").value;localStorage.ApplicationApprovalListApplicationSourceDelimitedText=objEMSCommonJS.GetMultiSelectList("multiSelectedApplicationSource").text;localStorage.ApplicationApprovalListPositionRemarks=$("#txtFilterPositionRemarks").val();localStorage.ApplicationApprovalListCourse=$("#txtFilterCourse").val();localStorage.ApplicationApprovalListCurrentPositionTitle=$("#txtFilterCurrentPositionTitle").val();localStorage.ApplicationApprovalListExpectedSalaryFrom=$("#txtFilterSalaryFrom").val();localStorage.ApplicationApprovalListExpectedSalaryTo=$("#txtFilterSalaryTo").val();localStorage.ApplicationApprovalListDateAppliedFrom=$("#txtFilterDateAppliedFrom").val();localStorage.ApplicationApprovalListDateAppliedTo=$("#txtFilterDateAppliedTo").val()},GetLocalStorage:function(){$("#txtFilterApplicantID").val(localStorage.ApplicationApprovalListID);$("#txtFilterApplicantName").val(localStorage.ApplicationApprovalListApplicantName);objEMSCommonJS.SetMultiSelectList("multiSelectedApplicationSource","ApplicationApprovalListApplicationSourceDelimited","ApplicationApprovalListApplicationSourceDelimitedText");$("#txtFilterPositionRemarks").val(localStorage.ApplicationApprovalListPositionRemarks);$("#txtFilterCourse").val(localStorage.ApplicationApprovalListCourse);$("#txtFilterCurrentPositionTitle").val(localStorage.ApplicationApprovalListCurrentPositionTitle);$("#txtFilterSalaryFrom").val(localStorage.ApplicationApprovalListExpectedSalaryFrom);$("#txtFilterSalaryTo").val(localStorage.ApplicationApprovalListExpectedSalaryTo);$("#txtFilterDateAppliedFrom").val(localStorage.ApplicationApprovalListDateAppliedFrom);$("#txtFilterDateAppliedTo").val(localStorage.ApplicationApprovalListDateAppliedTo)},RemoveDynamicFields:function(n,t){$(n).remove();ModalAlert(MODAL_HEADER,MSG_SUCCESS_DELETE_REC);t!=null&&t()},AddLink:function(n,t,i){return"<a href=\"\" class='jqgrid-id-link' onclick=\"return LoadPartial('"+ApplicantViewURL+"?ID="+i.ID+"', 'divApplicationApprovalBodyModal');\">"+i.ID+"<\/a>"},FormatAmount:function(n,t,i){return AddZeroes(i.ExpectedSalary+"").withComma()},UpdateStatusLink:function(n,t,i){return"<a href=\"\" class='jqgrid-update-link' onclick=\"return objApplicationApprovalListJS.OpenApplicationHistoryModal('"+UpdateStatusURL+"?ID="+i.ID+"&WorkflowID="+i.WorkflowID+"&HasApproval="+i.HasApproval+"', "+i.ID+');">'+(i.HasApproval?"Update":"View")+"<\/a>"},OpenApplicationHistoryModal:function(n,t){$("#divUpdateStatusModal").modal("show");var i=function(){$("#txtApplicantName").val($("#tblRecruitmentApplicationApprovalList").jqGrid("getCell",t,"ApplicantName"));$("#hdnID").val(t)};return LoadPartialSuccessFunction(n,"divUpdateStatusBodyModal",i),!1},ShowHideFilter:function(){$("#chkFilter").is(":checked")?$(".jqgfirstrow .filterFields").show():$("#chkFilter").is(":not(:checked)")&&$(".jqgfirstrow .filterFields").hide()}};objApplicationApprovalListJS.Initialize()});